(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{2383:()=>{},3686:()=>{},4857:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(7876),n=a(4232),s=a(2770);let l=["Swedbank","Gjensidige","Compensa","IF","BTA","Balta"],d=["Komerctelpa","Dzīvojamā ēka"],r=["Privātmāja","Daudzdzīvokļu māja","Rindu māja","Cits"],o=["CTA","Plūdi","Uguns","Koks","Cits"],c=["Jā","Nē"],u=["Virtuve","Guļamistaba","Koridors","Katla telpa","Dzīvojamā istaba","Vannas istaba","Tualete","Garderobe","Cits"],p=["Griesti","Siena","Grīda","Durvis","Logs","Elektroinstalācija","Mēbeles","Cits"],h=["Demontāža","Tīrīšana","Gruntēšana","Špaktelēšana","Krāsošana","Lamināta ieklāšana","Flīzēšana","Grīdas atjaunošana","Žāvēšana","Cits"],x="tames_profils_saglabatie";function g(){try{let e=localStorage.getItem(x);return e?JSON.parse(e):[]}catch(e){return[]}}function m(){var e,t,a;let[m,b]=(0,n.useState)(1),[j,v]=(0,n.useState)(""),[y,k]=(0,n.useState)(""),[f,C]=(0,n.useState)(""),[S,w]=(0,n.useState)(""),[z,R]=(0,n.useState)(""),[I,N]=(0,n.useState)(""),[B,_]=(0,n.useState)(""),[D,T]=(0,n.useState)(""),[W,M]=(0,n.useState)(""),[A,E]=(0,n.useState)("Nē"),[P,J]=(0,n.useState)("Nē"),[K,V]=(0,n.useState)("Nē"),[O,q]=(0,n.useState)("Nē"),[F,G]=(0,n.useState)(""),[L,U]=(0,n.useState)(u.reduce((e,t)=>(e[t]={checked:!1,count:1,custom:""},e),{})),[Z,H]=(0,n.useState)([]),[X,Y]=(0,n.useState)({}),[Q,$]=(0,n.useState)(null),[ee,et]=(0,n.useState)([]);function ea(e,t,a,i){Y(n=>{let s=[...n[e]||[{action:"",quantity:"",unit:"m2"}]];return s[t]={...s[t],[a]:i},{...n,[e]:s}})}(0,n.useEffect)(()=>et(g()),[]),(0,n.useEffect)(()=>{let e=[];Object.entries(L).forEach(t=>{let[a,i]=t;if(i.checked){let t=Math.max(1,Number(i.count)||1);for(let n=1;n<=t;n++){let t="".concat(a,"-").concat(n),s=Z.find(e=>e.id===t);e.push({id:t,type:"Cits"===a?i.custom||"Cits":a,index:n,areas:(null==s?void 0:s.areas)||[],note:(null==s?void 0:s.note)||""})}}}),H(e),Y(t=>{let a={};return e.forEach(e=>a[e.id]=t[e.id]||[{action:"",quantity:"",unit:"m2"}]),a})},[L]);let ei=(0,n.useMemo)(()=>{switch(m){case 1:return!!f.trim();case 2:return!!S;case 3:return!!z&&("Dzīvojamā ēka"!==z||!!I);case 4:return!!D&&("Cits"!==D||!!W.trim());case 5:return["Jā","Nē"].includes(A);case 6:return["Jā","Nē"].includes(P);case 7:return["Jā","Nē"].includes(K);case 8:return"Nē"===O||"Jā"===O&&!!F&&Number(F)>=0;case 9:return Object.values(L).some(e=>e.checked);default:return!0}},[m,f,S,z,I,D,W,A,P,K,O,F,L]),en=e=>(X[e]||[]).some(e=>e.action&&e.quantity),es=Z.length>0&&Z.every(e=>en(e.id));function el(e){let{label:t,children:a}=e;return(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:t}),(0,i.jsx)("div",{children:a})]})}function ed(e){let{title:t,children:a}=e;return(0,i.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,i.jsx)("div",{style:{fontSize:18,fontWeight:700,marginBottom:10},children:t}),a]})}let er=Math.round((m-1)/11*100);return(0,i.jsx)("div",{style:{minHeight:"100vh",background:"#f7fafc",color:"#111827"},children:(0,i.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:16},children:[(0,i.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontSize:22,fontWeight:800},children:["Apskates forma – solis ",m,"/",12]}),(0,i.jsx)("div",{style:{fontSize:13,color:"#4b5563"},children:"Aizpildi laukus secīgi no 1 līdz 12. Kad 10. solī visas telpas ir aizpildītas, varēsi ģenerēt tāmi."})]}),(0,i.jsxs)("div",{style:{background:"white",padding:12,borderRadius:12,width:320},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"Tāmētāja profils (neobligāti)"}),(0,i.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:6},placeholder:"Vārds, Uzvārds",value:j,onChange:e=>v(e.target.value)}),(0,i.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"E-pasts",value:y,onChange:e=>k(e.target.value)})]})]}),(0,i.jsx)("div",{style:{height:8,background:"#e5e7eb",borderRadius:999,marginBottom:16},children:(0,i.jsx)("div",{style:{width:"".concat(er,"%"),height:8,background:"#10b981",borderRadius:999}})}),1===m&&(0,i.jsx)(ed,{title:"1. Objekta adrese",children:(0,i.jsx)(el,{label:"Objekta adrese",children:(0,i.jsx)("input",{value:f,onChange:e=>C(e.target.value),placeholder:"Iela 1, Pilsēta",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),2===m&&(0,i.jsx)(ed,{title:"2. Apdrošināšanas kompānija",children:(0,i.jsx)(el,{label:"Izvēlies kompāniju",children:(0,i.jsxs)("select",{value:S,onChange:e=>w(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),l.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})})}),3===m&&(0,i.jsxs)(ed,{title:"3. Kur notika negadījums?",children:[(0,i.jsx)(el,{label:"Vieta",children:(0,i.jsxs)("select",{value:z,onChange:e=>R(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),d.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Dzīvojamā ēka"===z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el,{label:"3.1. Dzīvojamās ēkas tips",children:(0,i.jsxs)("select",{value:I,onChange:e=>N(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),r.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Cits"===I&&(0,i.jsx)(el,{label:"3.1.1. Norādi",children:(0,i.jsx)("input",{value:B,onChange:e=>_(e.target.value),placeholder:"NI tips",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]})]}),4===m&&(0,i.jsxs)(ed,{title:"4. Kas notika ar nekustamo īpašumu?",children:[(0,i.jsx)(el,{label:"Notikuma veids",children:(0,i.jsxs)("select",{value:D,onChange:e=>T(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),o.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Cits"===D&&(0,i.jsx)(el,{label:"4.1. Norādi",children:(0,i.jsx)("input",{value:W,onChange:e=>M(e.target.value),placeholder:"Notikuma apraksts",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),5===m&&(0,i.jsx)(ed,{title:"5. Elektrības traucējumi",children:(0,i.jsxs)(el,{label:"Elektrības traucējumi",children:[(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"el",checked:"Jā"===A,onChange:()=>E("Jā")})," Ir"]}),(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"radio",name:"el",checked:"Nē"===A,onChange:()=>E("Nē")})," Nav"]})]})}),6===m&&(0,i.jsx)(ed,{title:"6. Vai nepieciešama žāvēšana?",children:(0,i.jsx)(el,{label:"Žāvēšana",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"dry",checked:P===e,onChange:()=>J(e)})," ",e]},e))})}),7===m&&(0,i.jsx)(ed,{title:"7. Vai bojāts kopīpašums?",children:(0,i.jsx)(el,{label:"Kopīpašums",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"common",checked:K===e,onChange:()=>V(e)})," ",e]},e))})}),8===m&&(0,i.jsxs)(ed,{title:"8. Zaudējuma novērtējums pēc klienta vārdiem",children:[(0,i.jsx)(el,{label:"Vai ir zināma summa?",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"loss",checked:O===e,onChange:()=>q(e)})," ",e]},e))}),"Jā"===O&&(0,i.jsx)(el,{label:"Summa EUR",children:(0,i.jsx)("input",{type:"number",min:0,value:F,onChange:e=>G(e.target.value),placeholder:"€ summa",style:{width:200,border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),9===m&&(0,i.jsx)(ed,{title:"9. Izvēlies telpu/as, kas tika bojātas",children:(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(240px,1fr))",gap:12},children:u.map(e=>(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,i.jsxs)("label",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"checkbox",checked:L[e].checked,onChange:t=>U({...L,[e]:{...L[e],checked:t.target.checked}})}),e]}),L[e].checked&&(0,i.jsxs)("div",{style:{marginTop:8},children:["Cits"===e&&(0,i.jsx)("input",{placeholder:"Telpas nosaukums",value:L[e].custom,onChange:t=>U({...L,[e]:{...L[e],custom:t.target.value}}),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:8}}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("span",{children:"Daudzums:"}),(0,i.jsx)("input",{type:"number",min:1,value:L[e].count,onChange:t=>U({...L,[e]:{...L[e],count:Number(t.target.value||1)}}),style:{width:90,border:"1px solid #e5e7eb",borderRadius:10,padding:6}})]})]})]},e))})}),10===m&&(0,i.jsxs)(ed,{title:"10. Izvēlētās telpas",children:[0===Z.length?(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Nav izvēlētas telpas 9. solī."}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:12},children:Z.map(e=>{let t=en(e.id),a=e.areas.length;return(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,background:"#f9fafb"},children:[(0,i.jsxs)("div",{style:{fontWeight:700,marginBottom:6},children:[e.type," ",e.index]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#4b5563",marginBottom:8},children:["Bojātās vietas: ",a>0?a:"—"]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>{$(e.id),b(11)},style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Atvērt"}),t&&(0,i.jsx)("span",{style:{fontSize:12,color:"#059669",fontWeight:700},children:"Saglabāts"})]})]},e.id)})}),es&&(0,i.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,i.jsx)("button",{type:"button",onClick:function(){let e=[["Tāmētājs",j],["E-pasts",y],["Datums",new Date().toLocaleString()],["Objekta adrese",f],["Apdrošināšanas kompānija",S],["Kur notika negadījums?",z],["Dzīvojamās ēkas tips","Dzīvojamā ēka"===z?"Cits"===I?"Cits: ".concat(B):I:"—"],["Kas notika ar nekustamo īpašumu?","Cits"===D?"Cits: ".concat(W):D],["Elektrības traucējumi","Jā"===A?"Ir":"Nav"],["Vai nepieciešama žāvēšana?",P],["Vai bojāts kopīpašums?",K],["Zaudējuma novērtējums pēc klienta vārdiem","Jā"===O?"".concat(F," EUR"):"Nav"]],t=[["#","Telpa","Bojātās vietas","Piezīmes"],...Z.map((e,t)=>[t+1,"".concat(e.type," ").concat(e.index),e.areas.join(", ")||"—",e.note||""])],a=[["Telpa","Pozīcija","Daudzums","Mērvienība"],...Z.flatMap(e=>(X[e.id]||[]).filter(e=>e.action&&e.quantity).map(t=>["".concat(e.type," ").concat(e.index),t.action,t.quantity,t.unit||"m2"]))],i=s.Wp.book_new();s.Wp.book_append_sheet(i,s.Wp.aoa_to_sheet(e),"Pieteikums"),s.Wp.book_append_sheet(i,s.Wp.aoa_to_sheet(t),"Telpas"),s.Wp.book_append_sheet(i,s.Wp.aoa_to_sheet(a),"Darbi pa telpām");let n=s.M9(i,{type:"base64",bookType:"xlsx"}),l="tame_".concat((j||"tametajs").replaceAll(/[^a-zA-Z0-9_\-]/g,"_"),"_").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e=>String(e).padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate()),"_").concat(t(e.getHours()),"-").concat(t(e.getMinutes()))}(),".xlsx"),d=document.createElement("a");d.href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,".concat(n),d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d);var r={id:crypto.randomUUID(),filename:l,createdAtISO:new Date().toISOString(),estimator:j||"Nezināms",base64:n};let o=g();o.unshift(r),localStorage.setItem(x,JSON.stringify(o)),et(g())},style:{padding:"12px 16px",borderRadius:12,background:"#059669",color:"white",border:0},children:"Viss pabeigts — izveidot tāmi"})})]}),11===m&&Q&&(0,i.jsxs)(ed,{title:"11. Pozīcijas un apjomi – ".concat(null==(e=Z.find(e=>e.id===Q))?void 0:e.type," ").concat(null==(t=Z.find(e=>e.id===Q))?void 0:t.index),children:[(0,i.jsx)(el,{label:"Bojātās vietas šajā telpā",children:(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:p.map(e=>{var t;return(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,i.jsx)("input",{type:"checkbox",checked:(null==(t=Z.find(e=>e.id===Q))?void 0:t.areas.includes(e))||!1,onChange:()=>{H(t=>t.map(t=>t.id===Q?{...t,areas:t.areas.includes(e)?t.areas.filter(t=>t!==e):[...t.areas,e]}:t))}})," ",e]},e)})})}),(0,i.jsx)(el,{label:"Piezīmes",children:(0,i.jsx)("input",{value:(null==(a=Z.find(e=>e.id===Q))?void 0:a.note)||"",onChange:e=>{var t;return t=e.target.value,void H(e=>e.map(e=>e.id===Q?{...e,note:t}:e))},placeholder:"Papildus informācija",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})}),(0,i.jsx)("div",{style:{fontWeight:700,margin:"12px 0 6px"},children:"Pozīcijas un apjomi"}),(X[Q]||[{action:"",quantity:"",unit:"m2"}]).map((e,t)=>(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 110px auto",gap:8,alignItems:"end",marginBottom:8},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Pozīcija"}),(0,i.jsxs)("select",{value:e.action,onChange:e=>ea(Q,t,"action",e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),h.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Daudzums"}),(0,i.jsx)("input",{type:"number",min:0,step:"0.01",value:e.quantity,onChange:e=>ea(Q,t,"quantity",e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"m2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Mērv."}),(0,i.jsx)("input",{value:e.unit,onChange:e=>ea(Q,t,"unit",e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("button",{type:"button",onClick:()=>{Y(e=>({...e,[Q]:[...e[Q]||[],{action:"",quantity:"",unit:"m2"}]}))},style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"+ Pievienot"}),(0,i.jsx)("button",{type:"button",onClick:()=>{Y(e=>{let a=e[Q]||[];return a.length<=1?e:{...e,[Q]:a.filter((e,a)=>a!==t)}})},style:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"})]})]},t)),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:12},children:[(0,i.jsx)("button",{type:"button",onClick:()=>{11===m?($(null),b(10)):b(e=>Math.max(1,e-1))},style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white",color:"#111827"},children:"← Atpakaļ uz telpu sarakstu"}),(0,i.jsx)("button",{type:"button",onClick:()=>{$(null),b(10)},style:{padding:"10px 14px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Saglabāt un atgriezties"})]})]}),[1,2,3,4,5,6,7,8,9,12].includes(m)&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[(0,i.jsx)("button",{type:"button",onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===m,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:1===m?"#f3f4f6":"white",color:"#111827"},children:"← Atpakaļ"}),(0,i.jsx)("button",{type:"button",onClick:()=>b(e=>Math.min(12,e+1)),disabled:!ei||12===m,style:{padding:"10px 14px",borderRadius:10,background:ei&&12!==m?"#111827":"#9ca3af",color:"white",border:0},children:12===m?"Beigas":"Tālāk →"})]}),(0,i.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,marginTop:20},children:[(0,i.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Saglabātās tāmēs (šajā pārlūkā)"}),0===ee.length?(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Vēl nav saglabātu tāmju."}):(0,i.jsx)("div",{style:{overflowX:"auto"},children:(0,i.jsxs)("table",{style:{width:"100%",fontSize:14},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Fails"}),(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Tāmētājs"}),(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Datums"})]})}),(0,i.jsx)("tbody",{children:ee.map(e=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("td",{style:{padding:"8px 12px",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e.filename}),(0,i.jsx)("td",{style:{padding:"8px 12px"},children:e.estimator}),(0,i.jsx)("td",{style:{padding:"8px 12px"},children:new Date(e.createdAtISO).toLocaleString()})]},e.id))})]})})]}),(0,i.jsx)("footer",{style:{paddingBottom:40,marginTop:12,fontSize:12,color:"#6b7280"},children:"Piezīme: šī versija glabā tāmju failus lokāli (LocalStorage). Servera glabāšanai pievieno Supabase Storage un saglabā base64 saturu bucketā."})]})})}}}]);
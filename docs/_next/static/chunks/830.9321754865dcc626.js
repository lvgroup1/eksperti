(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{2383:()=>{},3686:()=>{},4857:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var i=a(7876),s=a(4232),n=a(2770);let l=["Swedbank","Gjensidige","Compensa","IF","BTA","Balta"],d=["Komerctelpa","Dzīvojamā ēka"],r=["Privātmāja","Daudzdzīvokļu māja","Rindu māja","Cits"],o=["CTA","Plūdi","Uguns","Koks","Cits"],c=["Jā","Nē"],u=["Virtuve","Guļamistaba","Koridors","Katla telpa","Dzīvojamā istaba","Vannas istaba","Tualete","Garderobe","Cits"],p=["Griesti","Siena","Grīda","Durvis","Logs","Elektroinstalācija","Mēbeles","Cits"],h=["Demontāža","Tīrīšana","Gruntēšana","Špaktelēšana","Krāsošana","Lamināta ieklāšana","Flīzēšana","Grīdas atjaunošana","Žāvēšana","Cits"],m="tames_profils_saglabatie";function x(){try{let e=localStorage.getItem(m);return e?JSON.parse(e):[]}catch(e){return[]}}function g(){let[e,t]=(0,s.useState)(1),[a,g]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[k,f]=(0,s.useState)(""),[C,S]=(0,s.useState)(""),[w,z]=(0,s.useState)(""),[R,N]=(0,s.useState)(""),[I,_]=(0,s.useState)(""),[D,B]=(0,s.useState)(""),[T,E]=(0,s.useState)("Nē"),[W,M]=(0,s.useState)("Nē"),[P,A]=(0,s.useState)("Nē"),[J,V]=(0,s.useState)("Nē"),[K,O]=(0,s.useState)(""),[q,F]=(0,s.useState)(u.reduce((e,t)=>(e[t]={checked:!1,count:1,custom:""},e),{})),[G,L]=(0,s.useState)([]),[U,Z]=(0,s.useState)([{action:"",quantity:"",unit:"m2"}]),[H,X]=(0,s.useState)([]);(0,s.useEffect)(()=>X(x()),[]),(0,s.useEffect)(()=>{let e=[];Object.entries(q).forEach(t=>{let[a,i]=t;if(i.checked){let t=Math.max(1,Number(i.count)||1);for(let s=1;s<=t;s++)e.push({id:"".concat(a,"-").concat(s),type:"Cits"===a?i.custom||"Cits":a,index:s,areas:[],note:""})}}),L(e)},[q]);let Y=()=>Z(e=>[...e,{action:"",quantity:"",unit:"m2"}]),Q=(0,s.useMemo)(()=>{switch(e){case 1:return!!v.trim();case 2:return!!k;case 3:return!!C&&("Dzīvojamā ēka"!==C||!!w);case 4:return!!I&&("Cits"!==I||!!D.trim());case 5:return["Jā","Nē"].includes(T);case 6:return["Jā","Nē"].includes(W);case 7:return["Jā","Nē"].includes(P);case 8:return"Nē"===J||"Jā"===J&&!!K&&Number(K)>=0;case 9:return Object.values(q).some(e=>e.checked);case 10:case 12:default:return!0;case 11:return U.every(e=>e.action&&e.quantity||!e.action&&!e.quantity)}},[e,v,k,C,w,I,D,T,W,P,J,K,q,U]);function $(e){let{label:t,children:a}=e;return(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:t}),(0,i.jsx)("div",{children:a})]})}function ee(e){let{title:t,children:a}=e;return(0,i.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,i.jsx)("div",{style:{fontSize:18,fontWeight:700,marginBottom:10},children:t}),a]})}let et=Math.round((e-1)/11*100);return(0,i.jsx)("div",{style:{minHeight:"100vh",background:"#f7fafc",color:"#111827"},children:(0,i.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:16},children:[(0,i.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontSize:22,fontWeight:800},children:["Apskates forma – solis ",e,"/",12]}),(0,i.jsx)("div",{style:{fontSize:13,color:"#4b5563"},children:"Aizpildi laukus secīgi no 1 līdz 12. Pēdējā solī tiks ģenerēta Excel tāme."})]}),(0,i.jsxs)("div",{style:{background:"white",padding:12,borderRadius:12,width:320},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"Tāmētāja profils (neobligāti)"}),(0,i.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:6},placeholder:"Vārds, Uzvārds",value:a,onChange:e=>g(e.target.value)}),(0,i.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"E-pasts",value:b,onChange:e=>j(e.target.value)})]})]}),(0,i.jsx)("div",{style:{height:8,background:"#e5e7eb",borderRadius:999,marginBottom:16},children:(0,i.jsx)("div",{style:{width:"".concat(et,"%"),height:8,background:"#10b981",borderRadius:999}})}),1===e&&(0,i.jsx)(ee,{title:"1. Objekta adrese",children:(0,i.jsx)($,{label:"Objekta adrese",children:(0,i.jsx)("input",{value:v,onChange:e=>y(e.target.value),placeholder:"Iela 1, Pilsēta",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),2===e&&(0,i.jsx)(ee,{title:"2. Apdrošināšanas kompānija",children:(0,i.jsx)($,{label:"Izvēlies kompāniju",children:(0,i.jsxs)("select",{value:k,onChange:e=>f(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),l.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})})}),3===e&&(0,i.jsxs)(ee,{title:"3. Kur notika negadījums?",children:[(0,i.jsx)($,{label:"Vieta",children:(0,i.jsxs)("select",{value:C,onChange:e=>S(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),d.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Dzīvojamā ēka"===C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{label:"3.1. Dzīvojamās ēkas tips",children:(0,i.jsxs)("select",{value:w,onChange:e=>z(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),r.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Cits"===w&&(0,i.jsx)($,{label:"3.1.1. Norādi",children:(0,i.jsx)("input",{value:R,onChange:e=>N(e.target.value),placeholder:"NI tips",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]})]}),4===e&&(0,i.jsxs)(ee,{title:"4. Kas notika ar nekustamo īpašumu?",children:[(0,i.jsx)($,{label:"Notikuma veids",children:(0,i.jsxs)("select",{value:I,onChange:e=>_(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),o.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Cits"===I&&(0,i.jsx)($,{label:"4.1. Norādi",children:(0,i.jsx)("input",{value:D,onChange:e=>B(e.target.value),placeholder:"Notikuma apraksts",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),5===e&&(0,i.jsx)(ee,{title:"5. Elektrības traucējumi",children:(0,i.jsxs)($,{label:"Elektrības traucējumi",children:[(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"el",checked:"Jā"===T,onChange:()=>E("Jā")})," Ir"]}),(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"radio",name:"el",checked:"Nē"===T,onChange:()=>E("Nē")})," Nav"]})]})}),6===e&&(0,i.jsx)(ee,{title:"6. Vai nepieciešama žāvēšana?",children:(0,i.jsx)($,{label:"Žāvēšana",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"dry",checked:W===e,onChange:()=>M(e)})," ",e]},e))})}),7===e&&(0,i.jsx)(ee,{title:"7. Vai bojāts kopīpašums?",children:(0,i.jsx)($,{label:"Kopīpašums",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"common",checked:P===e,onChange:()=>A(e)})," ",e]},e))})}),8===e&&(0,i.jsxs)(ee,{title:"8. Zaudējuma novērtējums pēc klienta vārdiem",children:[(0,i.jsx)($,{label:"Vai ir zināma summa?",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"loss",checked:J===e,onChange:()=>V(e)})," ",e]},e))}),"Jā"===J&&(0,i.jsx)($,{label:"Summa EUR",children:(0,i.jsx)("input",{type:"number",min:0,value:K,onChange:e=>O(e.target.value),placeholder:"€ summa",style:{width:200,border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),9===e&&(0,i.jsx)(ee,{title:"9. Izvēlies telpu/as, kas tika bojātas",children:(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(240px,1fr))",gap:12},children:u.map(e=>(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,i.jsxs)("label",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"checkbox",checked:q[e].checked,onChange:t=>F({...q,[e]:{...q[e],checked:t.target.checked}})}),e]}),q[e].checked&&(0,i.jsxs)("div",{style:{marginTop:8},children:["Cits"===e&&(0,i.jsx)("input",{placeholder:"Telpas nosaukums",value:q[e].custom,onChange:t=>F({...q,[e]:{...q[e],custom:t.target.value}}),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:8}}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("span",{children:"Daudzums:"}),(0,i.jsx)("input",{type:"number",min:1,value:q[e].count,onChange:t=>F({...q,[e]:{...q[e],count:Number(t.target.value||1)}}),style:{width:90,border:"1px solid #e5e7eb",borderRadius:10,padding:6}})]})]})]},e))})}),10===e&&(0,i.jsx)(ee,{title:"10. Vietas katrā telpā, kas tika bojātas",children:0===G.length?(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Nav izvēlētas telpas 9. solī."}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:12},children:G.map(e=>(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,background:"#f9fafb"},children:[(0,i.jsxs)("div",{style:{fontWeight:600,marginBottom:8},children:[e.type," ",e.index]}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginBottom:8},children:p.map(t=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,i.jsx)("input",{type:"checkbox",checked:e.areas.includes(t),onChange:()=>{var a;return a=e.id,void L(e=>e.map(e=>e.id===a?{...e,areas:e.areas.includes(t)?e.areas.filter(e=>e!==t):[...e.areas,t]}:e))}})," ",t]},t))}),(0,i.jsx)("input",{placeholder:"Piezīmes (papildus info)",value:e.note,onChange:t=>{var a,i;return a=e.id,i=t.target.value,void L(e=>e.map(e=>e.id===a?{...e,note:i}:e))},style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})]},e.id))})}),11===e&&(0,i.jsx)(ee,{title:"11. Pozīcijas un apjomi",children:(0,i.jsx)("div",{style:{display:"grid",gap:12},children:U.map((e,t)=>(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 110px auto",gap:8,alignItems:"end"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Pozīcija"}),(0,i.jsxs)("select",{value:e.action,onChange:e=>Z(a=>a.map((a,i)=>i===t?{...a,action:e.target.value}:a)),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),h.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Daudzums"}),(0,i.jsx)("input",{type:"number",min:0,step:"0.01",value:e.quantity,onChange:e=>Z(a=>a.map((a,i)=>i===t?{...a,quantity:e.target.value}:a)),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"m2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Mērv."}),(0,i.jsx)("input",{value:e.unit,onChange:e=>Z(a=>a.map((a,i)=>i===t?{...a,unit:e.target.value}:a)),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("button",{type:"button",onClick:Y,style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"+ Pievienot"}),(0,i.jsx)("button",{type:"button",onClick:()=>Z(e=>1===e.length?e:e.filter((e,a)=>a!==t)),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"})]})]},t))})}),12===e&&(0,i.jsxs)(ee,{title:"12. Pabeigt apskati – ģenerēt Excel tāmi",children:[(0,i.jsx)("div",{style:{marginBottom:12,color:"#374151"},children:"Nospiežot pogu, tiks izveidota Excel tāme no ievadītajiem datiem un saglabāta jūsu profilā (šajā pārlūkā)."}),(0,i.jsx)("button",{type:"button",onClick:function(){let e=[["Tāmētājs",a],["E-pasts",b],["Datums",new Date().toLocaleString()],["Objekta adrese",v],["Apdrošināšanas kompānija",k],["Kur notika negadījums?",C],["Dzīvojamās ēkas tips","Dzīvojamā ēka"===C?"Cits"===w?"Cits: ".concat(R):w:"—"],["Kas notika ar nekustamo īpašumu?","Cits"===I?"Cits: ".concat(D):I],["Elektrības traucējumi","Jā"===T?"Ir":"Nav"],["Vai nepieciešama žāvēšana?",W],["Vai bojāts kopīpašums?",P],["Zaudējuma novērtējums pēc klienta vārdiem","Jā"===J?"".concat(K," EUR"):"Nav"]],t=[["#","Telpa","Bojātās vietas","Piezīmes"],...G.map((e,t)=>[t+1,"".concat(e.type," ").concat(e.index),e.areas.join(", ")||"—",e.note||""])],i=[["#","Pozīcija","Daudzums","Mērvienība"],...U.filter(e=>e.action&&e.quantity).map((e,t)=>[t+1,e.action,e.quantity,e.unit||"m2"])],s=n.Wp.book_new(),l=n.Wp.aoa_to_sheet(e),d=n.Wp.aoa_to_sheet(t),r=n.Wp.aoa_to_sheet(i);n.Wp.book_append_sheet(s,l,"Pieteikums"),n.Wp.book_append_sheet(s,d,"Telpas"),n.Wp.book_append_sheet(s,r,"Darbi");let o=n.M9(s,{type:"base64",bookType:"xlsx"}),c="tame_".concat((a||"tametajs").replaceAll(/[^a-zA-Z0-9_\-]/g,"_"),"_").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e=>String(e).padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate()),"_").concat(t(e.getHours()),"-").concat(t(e.getMinutes()))}(),".xlsx"),u=document.createElement("a");u.href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,".concat(o),u.download=c,document.body.appendChild(u),u.click(),document.body.removeChild(u);var p={id:crypto.randomUUID(),filename:c,createdAtISO:new Date().toISOString(),estimator:a||"Nezināms",base64:o};let h=x();h.unshift(p),localStorage.setItem(m,JSON.stringify(h)),X(x())},style:{padding:"12px 16px",borderRadius:12,background:"#059669",color:"white",border:0},children:"Ģenerēt Excel"})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[(0,i.jsx)("button",{type:"button",onClick:()=>t(e=>Math.max(1,e-1)),disabled:1===e,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:1===e?"#f3f4f6":"white",color:"#111827"},children:"← Atpakaļ"}),(0,i.jsx)("button",{type:"button",onClick:()=>t(e=>Math.min(12,e+1)),disabled:!Q||12===e,style:{padding:"10px 14px",borderRadius:10,background:Q&&12!==e?"#111827":"#9ca3af",color:"white",border:0},children:12===e?"Beigas":"Tālāk →"})]}),(0,i.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,marginTop:20},children:[(0,i.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Saglabātās tāmēs (šajā pārlūkā)"}),0===H.length?(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Vēl nav saglabātu tāmju."}):(0,i.jsx)("div",{style:{overflowX:"auto"},children:(0,i.jsxs)("table",{style:{width:"100%",fontSize:14},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Fails"}),(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Tāmētājs"}),(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Datums"})]})}),(0,i.jsx)("tbody",{children:H.map(e=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("td",{style:{padding:"8px 12px",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e.filename}),(0,i.jsx)("td",{style:{padding:"8px 12px"},children:e.estimator}),(0,i.jsx)("td",{style:{padding:"8px 12px"},children:new Date(e.createdAtISO).toLocaleString()})]},e.id))})]})})]}),(0,i.jsx)("footer",{style:{paddingBottom:40,marginTop:12,fontSize:12,color:"#6b7280"},children:"Piezīme: šī versija glabā tāmju failus lokāli (LocalStorage). Servera glabāšanai pievieno Supabase Storage un saglabā base64 saturu bucketā."})]})})}}}]);
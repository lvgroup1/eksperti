"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{4857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l=a(7876),i=a(4232);let n=["Swedbank","Gjensidige","Compensa","IF","BTA","Balta"],r=["Komerctelpa","Dzīvojamā ēka"],o=["Privātmāja","Daudzdzīvokļu māja","Rindu māja","Cits"],d=["CTA","Plūdi","Uguns","Koks","Cits"],s=["Jā","Nē"],c=["Virtuve","Guļamistaba","Koridors","Katla telpa","Dzīvojamā istaba","Vannas istaba","Tualete","Garderobe","Cits"];function u(e){if(!e)return"";let t=String(e).trim().toLowerCase().replace("\xb2","2").replace("\xa0"," ").replace("  "," ");return"gb."===t||"gab."===t||"gab"===t?"gab":"m2"===t||"m 2"===t||"m^2"===t?"m2":"m3"===t||"m 3"===t||"m^3"===t?"m3":"m"===t?"m":"kpl"===t||"kpl."===t?"kpl":"diena"===t?"diena":"c/h"===t?"c/h":"obj."===t||"obj"===t?"obj":t}let p=["m2","m3","m","gab","kpl","diena","obj","c/h"];function m(){var e,t,m;let[g,h]=(0,i.useState)(1),[b,x]=(0,i.useState)(""),[v,j]=(0,i.useState)(""),[f,y]=(0,i.useState)(""),[C,k]=(0,i.useState)(""),[w,R]=(0,i.useState)("Balta"),[S,z]=(0,i.useState)(""),[N,I]=(0,i.useState)(""),[B,L]=(0,i.useState)(""),[D,T]=(0,i.useState)(""),[A,M]=(0,i.useState)(""),[E,F]=(0,i.useState)("Nē"),[P,U]=(0,i.useState)("Nē"),[O,_]=(0,i.useState)("Nē"),[J,W]=(0,i.useState)("Nē"),[K,V]=(0,i.useState)(""),[q,G]=(0,i.useState)(c.reduce((e,t)=>(e[t]={checked:!1,count:1,custom:""},e),{})),[H,X]=(0,i.useState)([]),[Y,Z]=(0,i.useState)({}),[Q,$]=(0,i.useState)(null),[ee,et]=(0,i.useState)([]),[ea,el]=(0,i.useState)(""),ei=window.location.hostname.endsWith("github.io")||window.location.pathname.startsWith("/eksperti")?"/eksperti":"";(0,i.useEffect)(()=>{if("Balta"!==w)return void et([]);el(""),fetch("".concat(ei,"/prices/balta.json")).then(e=>{if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()}).then(e=>{et((Array.isArray(e.items)?e.items:[]).map(e=>({...e,unit:u(e.unit),category:String(e.category||"").trim(),name:String(e.name||"").trim()})))}).catch(e=>el("Neizdevās ielādēt BALTA cenas: ".concat(e.message)))},[w,ei]);let en=(0,i.useMemo)(()=>Array.from(new Set(ee.map(e=>e.category))),[ee]),er=(0,i.useMemo)(()=>{let e=new Set(p);return ee.forEach(t=>t.unit&&e.add(u(t.unit))),Array.from(e)},[ee]),[eo,ed]=(0,i.useState)([]);function es(e,t,a,l){Z(i=>{let n=[...i[e]||[]],r={...n[t],[a]:l};return n[t]=r,{...i,[e]:n}})}(0,i.useEffect)(()=>ed(function(){try{let e=localStorage.getItem("tames_profils_saglabatie");return e?JSON.parse(e):[]}catch(e){return[]}}()),[]),(0,i.useEffect)(()=>{let e=[];Object.entries(q).forEach(t=>{let[a,l]=t;if(!l.checked)return;let i=Math.max(1,Number(l.count)||1);for(let t=1;t<=i;t++){let i="".concat(a,"-").concat(t),n=H.find(e=>e.id===i);e.push({id:i,type:"Cits"===a?l.custom||"Cits":a,index:t,note:(null==n?void 0:n.note)||""})}}),X(e),Z(t=>{let a={};return e.forEach(e=>{a[e.id]=t[e.id]||[{category:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]}),a})},[q]);let ec=(0,i.useMemo)(()=>{switch(g){case 1:return!!C.trim();case 2:return!!w;case 3:return!!S&&("Dzīvojamā ēka"!==S||!!N);case 4:return!!D&&("Cits"!==D||!!A.trim());case 5:return["Jā","Nē"].includes(E);case 6:return["Jā","Nē"].includes(P);case 7:return["Jā","Nē"].includes(O);case 8:return"Nē"===J||"Jā"===J&&!!K&&Number(K)>=0;case 9:return Object.values(q).some(e=>e.checked);default:return!0}},[g,C,w,S,N,D,A,E,P,O,J,K,q]);async function eu(){let e,t=[];if(H.forEach(e=>{(Y[e.id]||[]).forEach(a=>{let l=Number(a.quantity)||0;a.itemId&&l>0&&t.push({room:"".concat(e.type," ").concat(e.index),name:a.itemName||"",unit:(a.unit||"").trim(),qty:l,unitPrice:Number(a.unit_price)||0})})}),!t.length)return void alert("Nav ievadītu pozīciju ar daudzumu.");t.sort((e,t)=>e.room.localeCompare(t.room)||e.name.localeCompare(t.name));let l=(await a.e(22).then(a.t.bind(a,1980,23))).default,i=window.location.hostname.endsWith("github.io")||window.location.pathname.startsWith("/eksperti")?"/eksperti":"",n=new l.Workbook;try{let t=await fetch("".concat(i,"/templates/balta_template.xlsx"));if(!t.ok)throw Error("HTTP ".concat(t.status));await n.xlsx.load(await t.arrayBuffer()),e=n.getWorksheet("Tāme")||n.worksheets[0]}catch(t){(e=n.addWorksheet("Tāme")).getRow(13).values=[null,"Darbs","Mērv.","Daudz.","Darba alga (vien.)","Materiāli (vien.)","Mehānismi (vien.)","Kopā (vien.)","Darba alga (kopā)","Materiāli (kopā)","Mehānismi (kopā)","Summa (kopā)"],e.getRow(13).font={name:"Calibri",size:11,bold:!0},e.getRow(13).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}e.views=[{state:"normal",showGridLines:!1}];let r=new Date().toLocaleDateString("lv-LV",{year:"numeric",month:"long",day:"numeric"}),o=(t,a)=>{try{e.getCell(t).value=a}catch(e){}};o("A1","Pasūtītājs: ".concat(w||"Balta")),o("A2","Objekts: ".concat(S||"").concat(N?" – "+N:"")),o("A3","Objekta adrese: ".concat(C||"")),o("A8","Rīga, ".concat(r)),o("A9","Pamatojums: apdrošināšanas lieta Nr. ".concat(f||"—"));for(let t=15;t<=3e3;t++){let a=e.getRow(t);a.height=void 0;for(let e=1;e<=12;e++){let t=a.getCell(e);t.value=null,t.border=void 0,t.fill=void 0,t.numFmt=void 0,t.font=void 0,t.alignment=void 0}}e.getColumn(2).alignment={wrapText:!0,vertical:"middle"},e.getColumn(2).width=56,e.getColumn(3).width=12,e.getColumn(4).width=10,[5,6,7,8,9,10,11,12].forEach(t=>e.getColumn(t).width=14);let d={style:"thin"},s={name:"Calibri",size:11},c="#,##0.00",u=t.reduce((e,t)=>{var a;return(e[a=t.room]||(e[a]=[])).push(t),e},{}),p=15,m=1,g=null,h=null,b=t=>{let a=e.getRow(p);a.getCell(2).value=t;for(let e=1;e<=12;e++){let t=a.getCell(e);t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF3F6FD"}},t.font={...s,bold:!0},t.border={bottom:d},2===e&&(t.alignment={wrapText:!0,vertical:"middle",horizontal:"left"})}a.height=20,p++},x=t=>{let a=e.getRow(p);a.getCell(1).value=m++,a.getCell(2).value=t.name,a.getCell(3).value=t.unit,a.getCell(4).value=t.qty,a.getCell(5).value=t.unitPrice,a.getCell(6).value=0,a.getCell(7).value=0,a.getCell(8).value={formula:"ROUND(SUM(E".concat(p,":G").concat(p,"),2)")},a.getCell(9).value={formula:"ROUND(E".concat(p,"*D").concat(p,",2)")},a.getCell(10).value={formula:"ROUND(F".concat(p,"*D").concat(p,",2)")},a.getCell(11).value={formula:"ROUND(G".concat(p,"*D").concat(p,",2)")},a.getCell(12).value={formula:"ROUND(H".concat(p,"*D").concat(p,",2)")};for(let e=1;e<=12;e++){let t=a.getCell(e);t.font={...s},t.border={bottom:d}}a.getCell(4).numFmt="#,##0.00",[5,6,7,8,9,10,11,12].forEach(e=>a.getCell(e).numFmt=c),a.getCell(2).alignment={wrapText:!0,vertical:"middle",horizontal:"left"},a.getCell(3).alignment={vertical:"middle",horizontal:"left"},[1,4,5,6,7,8,9,10,11,12].forEach(e=>a.getCell(e).alignment={vertical:"middle",horizontal:"right"}),a.height=18,null===g&&(g=p),h=p,p++};for(let e of Object.keys(u))for(let t of(b(e),u[e]))x(t);let v=p+1;e.getCell("B".concat(v)).value="Kopā ",e.getCell("I".concat(v)).value={formula:g?"SUM(I".concat(g,":I").concat(h,")"):"0"},e.getCell("J".concat(v)).value={formula:g?"SUM(J".concat(g,":J").concat(h,")"):"0"},e.getCell("K".concat(v)).value={formula:g?"SUM(K".concat(g,":K").concat(h,")"):"0"},e.getCell("L".concat(v)).value={formula:g?"SUM(L".concat(g,":L").concat(h,")"):"0"},[9,10,11,12].forEach(t=>e.getCell(v,t).numFmt=c);for(let t=1;t<=12;t++)e.getCell(v,t).border={top:d};v+=2,e.getCell("B".concat(v)).value="Tiešās izmaksas kopā",e.getCell("I".concat(v)).value={formula:"I".concat(v-2)},e.getCell("J".concat(v)).value={formula:"J".concat(v-2)},e.getCell("K".concat(v)).value={formula:"K".concat(v-2)},e.getCell("L".concat(v)).value={formula:"L".concat(v-2)},[9,10,11,12].forEach(t=>e.getCell(v,t).numFmt=c);let j=v+5;e.getCell("B".concat(j)).value="PVN",e.getCell("C".concat(j)).value=.21,e.getCell("L".concat(j)).value={formula:"ROUND(L".concat(v,"*C").concat(j,",2)")},e.getCell("L".concat(j)).numFmt=c;let y=j+1;e.getCell("B".concat(y)).value="Pavisam kopā",e.getCell("L".concat(y)).value={formula:"ROUND(L".concat(v,"+L").concat(j,",2)")},e.getCell("L".concat(y)).numFmt=c,e.getCell("J9").value="Tāmes summa euro :",e.getCell("L9").value={formula:"L".concat(v)},e.getCell("L9").numFmt=c,e.getCell("J10").value="PVN 21%:",e.getCell("L10").value={formula:"L".concat(j)},e.getCell("L10").numFmt=c,e.getCell("J11").value="Pavisam kopā euro:",e.getCell("L11").value={formula:"L".concat(y)},e.getCell("L11").numFmt=c,e.pageSetup.printArea="A1:L".concat(y),e.properties.outlineLevelRow=0;let k=new Blob([await n.xlsx.writeBuffer()],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),R=URL.createObjectURL(k),z=document.createElement("a");z.href=R,z.download="Tame_Balta_".concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e=>String(e).padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate()),"_").concat(t(e.getHours()),"-").concat(t(e.getMinutes()))}(),".xlsx"),document.body.appendChild(z),z.click(),z.remove(),URL.revokeObjectURL(R)}function ep(e){let{label:t,children:a}=e;return(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:t}),(0,l.jsx)("div",{children:a})]})}function em(e){let{title:t,children:a}=e;return(0,l.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,l.jsx)("div",{style:{fontSize:18,fontWeight:700,marginBottom:10},children:t}),a]})}let eg=Math.round((g-1)/11*100);return(0,l.jsx)("div",{style:{minHeight:"100vh",background:"#f7fafc",color:"#111827"},children:(0,l.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto",padding:16},children:[(0,l.jsx)("div",{style:{background:"white",padding:12,borderRadius:12,marginBottom:12},children:(0,l.jsx)(ep,{label:"Lietas Nr.",children:(0,l.jsx)("input",{value:f,onChange:e=>y(e.target.value),placeholder:"piem., CLV1234567",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),(0,l.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:16},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{fontSize:22,fontWeight:800},children:["Apskates forma – solis ",g,"/",12]}),(0,l.jsx)("div",{style:{fontSize:13,color:"#4b5563"},children:"Tāmētājs ievada tikai daudzumu. Cenas netiek rādītas formā un parādīsies tikai gala tāmē."})]}),(0,l.jsxs)("div",{style:{background:"white",padding:12,borderRadius:12,width:360},children:[(0,l.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"Tāmētāja profils (neobligāti)"}),(0,l.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:6},placeholder:"Vārds, Uzvārds",value:b,onChange:e=>x(e.target.value)}),(0,l.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"E-pasts",value:v,onChange:e=>j(e.target.value)})]})]}),(0,l.jsx)("div",{style:{height:8,background:"#e5e7eb",borderRadius:999,marginBottom:16},children:(0,l.jsx)("div",{style:{width:"".concat(eg,"%"),height:8,background:"#10b981",borderRadius:999}})}),1===g&&(0,l.jsx)(em,{title:"1. Objekta adrese",children:(0,l.jsx)(ep,{label:"Objekta adrese",children:(0,l.jsx)("input",{value:C,onChange:e=>k(e.target.value),placeholder:"Iela 1, Pilsēta",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),2===g&&(0,l.jsxs)(em,{title:"2. Apdrošināšanas kompānija",children:[(0,l.jsx)(ep,{label:"Izvēlies kompāniju",children:(0,l.jsx)("select",{value:w,onChange:e=>R(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:n.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})}),"Balta"===w&&(0,l.jsx)("div",{style:{fontSize:12,color:ea?"#b91c1c":"#065f46"},children:ea||(ee.length?"Ielādēts BALTA cenrādis (".concat(ee.length," pozīcijas)"):"Notiek BALTA cenrāža ielāde...")})]}),3===g&&(0,l.jsxs)(em,{title:"3. Kur notika negadījums?",children:[(0,l.jsx)(ep,{label:"Vieta",children:(0,l.jsxs)("select",{value:S,onChange:e=>z(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,l.jsx)("option",{value:"",children:"— Izvēlies —"}),r.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})}),"Dzīvojamā ēka"===S&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ep,{label:"3.1. Dzīvojamās ēkas tips",children:(0,l.jsxs)("select",{value:N,onChange:e=>I(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,l.jsx)("option",{value:"",children:"— Izvēlies —"}),o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})}),"Cits"===N&&(0,l.jsx)(ep,{label:"3.1.1. Norādi",children:(0,l.jsx)("input",{value:B,onChange:e=>L(e.target.value),placeholder:"NI tips",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]})]}),4===g&&(0,l.jsxs)(em,{title:"4. Kas notika ar nekustamo īpašumu?",children:[(0,l.jsx)(ep,{label:"Notikuma veids",children:(0,l.jsxs)("select",{value:D,onChange:e=>T(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,l.jsx)("option",{value:"",children:"— Izvēlies —"}),d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})}),"Cits"===D&&(0,l.jsx)(ep,{label:"4.1. Norādi",children:(0,l.jsx)("input",{value:A,onChange:e=>M(e.target.value),placeholder:"Notikuma apraksts",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),5===g&&(0,l.jsx)(em,{title:"5. Elektrības traucējumi",children:(0,l.jsxs)(ep,{label:"Elektrības traucējumi",children:[(0,l.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,l.jsx)("input",{type:"radio",name:"el",checked:"Jā"===E,onChange:()=>F("Jā")})," Ir"]}),(0,l.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[(0,l.jsx)("input",{type:"radio",name:"el",checked:"Nē"===E,onChange:()=>F("Nē")})," Nav"]})]})}),6===g&&(0,l.jsx)(em,{title:"6. Vai nepieciešama žāvēšana?",children:(0,l.jsx)(ep,{label:"Žāvēšana",children:s.map(e=>(0,l.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,l.jsx)("input",{type:"radio",name:"dry",checked:P===e,onChange:()=>U(e)})," ",e]},e))})}),7===g&&(0,l.jsx)(em,{title:"7. Vai bojāts kopīpašums?",children:(0,l.jsx)(ep,{label:"Kopīpašums",children:s.map(e=>(0,l.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,l.jsx)("input",{type:"radio",name:"common",checked:O===e,onChange:()=>_(e)})," ",e]},e))})}),8===g&&(0,l.jsxs)(em,{title:"8. Zaudējuma novērtējums pēc klienta vārdiem",children:[(0,l.jsx)(ep,{label:"Vai ir zināma summa?",children:s.map(e=>(0,l.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,l.jsx)("input",{type:"radio",name:"loss",checked:J===e,onChange:()=>W(e)})," ",e]},e))}),"Jā"===J&&(0,l.jsx)(ep,{label:"Summa EUR",children:(0,l.jsx)("input",{type:"number",min:0,value:K,onChange:e=>V(e.target.value),placeholder:"€ summa",style:{width:200,border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),9===g&&(0,l.jsx)(em,{title:"9. Izvēlies telpu/as, kas tika bojātas",children:(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(240px,1fr))",gap:12},children:c.map(e=>(0,l.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,l.jsxs)("label",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)("input",{type:"checkbox",checked:q[e].checked,onChange:t=>G({...q,[e]:{...q[e],checked:t.target.checked}})}),e]}),q[e].checked&&(0,l.jsxs)("div",{style:{marginTop:8},children:["Cits"===e&&(0,l.jsx)("input",{placeholder:"Telpas nosaukums",value:q[e].custom,onChange:t=>G({...q,[e]:{...q[e],custom:t.target.value}}),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:8}}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Daudzums:"}),(0,l.jsx)("input",{type:"number",min:1,value:q[e].count,onChange:t=>G({...q,[e]:{...q[e],count:Math.max(1,Number(t.target.value||1))}}),style:{width:90,border:"1px solid #e5e7eb",borderRadius:10,padding:6}})]})]})]},e))})}),10===g&&(0,l.jsxs)(em,{title:"10. Izvēlētās telpas",children:[0===H.length?(0,l.jsx)("div",{style:{color:"#6b7280"},children:"Nav izvēlētas telpas 9. solī."}):(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:12},children:H.map(e=>{let t=(Y[e.id]||[]).filter(e=>e.itemId&&e.quantity).length,a=(e.id,[]);return(0,l.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,background:"#f9fafb"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[(0,l.jsxs)("div",{style:{fontWeight:700},children:[e.type," ",e.index]}),(0,l.jsx)("button",{type:"button",onClick:()=>(function(e){let[t,a]=String(e).split("-"),l=parseInt(a,10)||1;Z(e=>{var a,i;let n={...e},r=(null==(a=q[t])?void 0:a.checked)?Number(null==(i=q[t])?void 0:i.count)||1:0;if(r<=0)return n;for(let e=l+1;e<=r;e++){let a="".concat(t,"-").concat(e),l="".concat(t,"-").concat(e-1);n[a]&&(n[l]=n[a])}return delete n["".concat(t,"-").concat(r)],n}),G(e=>{let a=e[t];if(!a)return e;let l=(Number(a.count)||1)-1,i={...e};return l<=0?i[t]={...a,checked:!1,count:1}:i[t]={...a,checked:!0,count:l},i}),$(t=>t===e?null:t)})(e.id),title:"Dzēst telpu",style:{marginLeft:"auto",padding:"4px 8px",borderRadius:8,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"})]}),(0,l.jsxs)("div",{style:{fontSize:13,color:"#4b5563",marginBottom:8},children:["Pozīcijas: ",t]}),a.length>0&&(0,l.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:8},children:a.map(e=>(0,l.jsx)("span",{style:{background:"#e5e7eb",borderRadius:999,padding:"4px 10px",fontSize:12},children:e},e))}),(0,l.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,l.jsx)("button",{type:"button",onClick:()=>{$(e.id),h(11)},style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Atvērt"})})]},e.id)})}),H.length>0&&(0,l.jsxs)("div",{style:{marginTop:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)("button",{type:"button",onClick:()=>h(9),style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"+ Pievienot vēl telpu"}),H.every(e=>(Y[e.id]||[]).some(e=>e.itemId&&e.quantity))&&(0,l.jsx)("button",{type:"button",onClick:eu,style:{padding:"12px 16px",borderRadius:12,background:"#059669",color:"white",border:0},children:"Viss pabeigts — izveidot tāmi"})]})]}),11===g&&Q&&(0,l.jsxs)(em,{title:"11. Pozīcijas un apjomi – ".concat(null==(e=H.find(e=>e.id===Q))?void 0:e.type," ").concat(null==(t=H.find(e=>e.id===Q))?void 0:t.index),children:[(0,l.jsx)(ep,{label:"Piezīmes",children:(0,l.jsx)("input",{value:(null==(m=H.find(e=>e.id===Q))?void 0:m.note)||"",onChange:e=>{var t;return t=e.target.value,void X(e=>e.map(e=>e.id===Q?{...e,note:t}:e))},placeholder:"Papildus informācija",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})}),(0,l.jsx)("div",{style:{fontWeight:700,margin:"12px 0 6px"},children:"Pozīcijas un apjomi"}),(Y[Q]||[{category:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]).map((e,t)=>{let a=e.category||"",i=ee.filter(e=>!a||e.category===a);return(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 2fr 1fr 0.8fr auto",gap:8,alignItems:"end",marginBottom:8},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Kategorija"}),(0,l.jsxs)("select",{value:a,onChange:e=>{var a;return a=e.target.value,void Z(e=>{var l;let i=[...e[Q]||[]];return i[t]={category:a,itemId:"",itemName:"",quantity:(null==(l=i[t])?void 0:l.quantity)||"",unit:"",unit_price:null},{...e,[Q]:i}})},style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,l.jsx)("option",{value:"",children:"— visas —"}),en.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{value:e.itemId,onChange:e=>(function(e,t,a){let l=ee.find(e=>e.id===a);Z(i=>{let n=[...i[e]||[]];return l?n[t]={...n[t],itemId:a,itemName:l.name,unit:l.unit||"",unit_price:l.unit_price}:n[t]={...n[t],itemId:"",itemName:"",unit:"",unit_price:null},{...i,[e]:n}})})(Q,t,e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,l.jsx)("option",{value:"",children:"— izvēlies pozīciju —"}),i.slice(0,1500).map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," \xb7 ",e.unit||"—"]},e.id))]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Mērv."}),(0,l.jsxs)("select",{value:u(e.unit)||"",onChange:e=>es(Q,t,"unit",u(e.target.value)),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,l.jsx)("option",{value:"",children:"—"}),er.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Daudz."}),(0,l.jsx)("input",{type:"number",min:0,step:"0.01",value:e.quantity,onChange:e=>es(Q,t,"quantity",e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"Skaitlis"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,l.jsx)("button",{type:"button",onClick:()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Z(a=>({...a,[e]:[...a[e]||[],{category:t||"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]}))})(Q,a),style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"+ Rinda"}),(0,l.jsx)("button",{type:"button",onClick:()=>{Z(e=>{let a=e[Q]||[];return a.length<=1?e:{...e,[Q]:a.filter((e,a)=>a!==t)}})},style:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"}),(0,l.jsx)("button",{type:"button",onClick:()=>{$(null),h(9)},style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white",color:"#111827"},children:"+ Pievienot vēl telpu"})]})]},t)}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:(0,l.jsx)("button",{type:"button",onClick:()=>{$(null),h(10)},style:{padding:"10px 14px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Saglabāt un atgriezties"})})]}),[1,2,3,4,5,6,7,8,9,12].includes(g)&&(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[(0,l.jsx)("button",{type:"button",onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===g,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:1===g?"#f3f4f6":"white",color:"#111827"},children:"← Atpakaļ"}),(0,l.jsx)("button",{type:"button",onClick:()=>h(e=>Math.min(12,e+1)),disabled:!ec||12===g,style:{padding:"10px 14px",borderRadius:10,background:ec&&12!==g?"#111827":"#9ca3af",color:"white",border:0},children:12===g?"Beigas":"Tālāk →"})]}),(0,l.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,marginTop:20},children:[(0,l.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Saglabātās tāmēs (šajā pārlūkā)"}),0===eo.length?(0,l.jsx)("div",{style:{color:"#6b7280"},children:"Vēl nav saglabātu tāmju."}):(0,l.jsx)("div",{style:{overflowX:"auto"},children:(0,l.jsxs)("table",{style:{width:"100%",fontSize:14},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:[(0,l.jsx)("th",{style:{padding:"8px 12px"},children:"Fails"}),(0,l.jsx)("th",{style:{padding:"8px 12px"},children:"Tāmētājs"}),(0,l.jsx)("th",{style:{padding:"8px 12px"},children:"Datums"})]})}),(0,l.jsx)("tbody",{children:eo.map(e=>(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,l.jsx)("td",{style:{padding:"8px 12px",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e.filename}),(0,l.jsx)("td",{style:{padding:"8px 12px"},children:e.estimator}),(0,l.jsx)("td",{style:{padding:"8px 12px"},children:new Date(e.createdAtISO).toLocaleString()})]},e.id))})]})})]}),(0,l.jsxs)("footer",{style:{paddingBottom:40,marginTop:12,fontSize:12,color:"#6b7280"},children:["Piezīme: cenrādis ielādējas no ",(0,l.jsx)("code",{children:"public/prices/balta.json"})," (Balta 27.08.2024). Cenas netiek rādītas formā; tās parādās tikai gala tāmē."]})]})})}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{228:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tames",function(){return i(374)}])},374:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var s=i(7876),r=i(4232);i(8230);let o="eksperti_tames";function n(){let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{try{let e=localStorage.getItem(o);if(!e)return;let i=JSON.parse(e);if(!Array.isArray(i))return;i.sort((e,t)=>(t.createdTs||0)-(e.createdTs||0)),t(i)}catch(e){console.error("Neizdevās nolasīt saglabātās tāmes:",e)}},[]),(0,s.jsx)("div",{style:{minHeight:"100vh",background:"#f3f4f6",color:"#111827"},children:(0,s.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto",padding:16},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{style:{fontSize:30,fontWeight:800,marginBottom:4},children:"Saglabātās tāmes"}),(0,s.jsx)("div",{style:{fontSize:14,color:"#4b5563"},children:"Tiek rādītas tāmes, kas izveidotas pēdējo 7 dienu laikā uz šīs ierīces."})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{window.location.href="/eksperti"},style:{padding:"10px 18px",borderRadius:999,border:"1px solid #e5e7eb",background:"white",fontSize:14,cursor:"pointer"},children:"← Atpakaļ uz formu"})]}),e.length>0&&(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:16},children:(0,s.jsx)("button",{type:"button",onClick:()=>{confirm("Vai tiešām dzēst visas saglabātās tāmes no šīs ierīces?")&&(localStorage.removeItem(o),t([]))},style:{padding:"8px 14px",borderRadius:999,border:"1px solid #fecaca",background:"#fef2f2",color:"#b91c1c",fontSize:14,cursor:"pointer"},children:"Dzēst visas no šīs ierīces"})}),0===e.length?(0,s.jsx)("p",{children:"Šobrīd nav saglabātu tāmju."}):(0,s.jsx)("div",{style:{display:"grid",gap:16},children:e.map((e,t)=>(0,s.jsxs)("div",{style:{background:"white",borderRadius:16,padding:20,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:16},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:700,fontSize:18,marginBottom:4},children:e.title||"Tāme #".concat(t+1)}),(0,s.jsxs)("div",{style:{fontSize:15,marginTop:4},children:["Apdrošinātājs:"," ",(0,s.jsx)("span",{style:{fontWeight:600},children:e.insurer||"—"})]}),e.claimNumber&&(0,s.jsxs)("div",{style:{fontSize:15},children:["Lietas Nr.:"," ",(0,s.jsx)("span",{style:{fontWeight:600},children:e.claimNumber})]}),e.rooms&&e.rooms.length>0&&(0,s.jsxs)("div",{style:{fontSize:15,marginTop:2},children:["Telpas: ",(0,s.jsx)("span",{style:{fontWeight:600},children:e.rooms.length})]}),e.rooms&&e.rooms.length>0&&(0,s.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:10},children:e.rooms.map((e,t)=>(0,s.jsx)("span",{style:{padding:"6px 14px",borderRadius:999,background:"#f3f4f6",border:"1px solid #e5e7eb",fontSize:13},children:e},t))})]}),(0,s.jsxs)("div",{style:{textAlign:"right",minWidth:180},children:[e.createdAt&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{fontSize:13,color:"#6b7280"},children:"Izveidota"}),(0,s.jsx)("div",{style:{fontSize:14,color:"#4b5563"},children:e.createdAt})]}),e.id&&(0,s.jsxs)("div",{style:{fontSize:13,color:"#9ca3af",marginTop:4},children:["ID: ",e.id]}),(0,s.jsxs)("div",{style:{marginTop:16},children:[(0,s.jsx)("button",{type:"button",onClick:()=>(e=>{if(!e.fileB64)return void alert("Šai tāmē nav saglabāts Excel fails (izveidota pirms jaunās versijas).");try{let t=window.atob(e.fileB64),i=t.length,s=new Uint8Array(i);for(let e=0;e<i;e++)s[e]=t.charCodeAt(e);let r=new Blob([s.buffer],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=e.fileName||"tame.xlsx",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(o)}catch(e){console.error("Download error:",e),alert("Neizdevās lejupielādēt tāmi no šīs ierīces.")}})(e),disabled:!e.fileB64,style:{padding:"8px 14px",borderRadius:999,border:"1px solid #e5e7eb",background:e.fileB64?"#111827":"#e5e7eb",color:e.fileB64?"white":"#9ca3af",fontSize:14,cursor:e.fileB64?"pointer":"default"},children:"Lejupielādēt tāmi"}),!e.fileB64&&(0,s.jsx)("div",{style:{fontSize:11,color:"#9ca3af",marginTop:4},children:"(Šī tāme izveidota pirms jaunās versijas, fails nav saglabāts.)"})]})]})]},t))})]})})}}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=228)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{228:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tames",function(){return i(374)}])},374:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var r=i(7876),s=i(4232);let n="saved_tames";function o(){let[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(n);if(!e)return;let i=JSON.parse(e);Array.isArray(i)&&t(i)}catch(e){console.error("Neizdevās nolasīt saglabātās tāmēs:",e)}},[]);let i=(0,s.useMemo)(()=>{let t=Date.now();return(e||[]).map(e=>{let t=e.date||e.createdAt,i=t?Date.parse(t):NaN;return{...e,_ts:Number.isFinite(i)?i:0}}).filter(e=>e._ts&&t-e._ts<=6048e5).sort((e,t)=>t._ts-e._ts)},[e]);return(0,r.jsx)("div",{style:{minHeight:"100vh",background:"#f7fafc",color:"#111827"},children:(0,r.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:16},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:22,fontWeight:800,margin:0},children:"Saglabātās tāmēs"}),(0,r.jsx)("p",{style:{margin:"4px 0 0",fontSize:13,color:"#6b7280"},children:"Tiek rādītas tāmes, kas izveidotas pēdējo 7 dienu laikā uz šīs ierīces."})]}),(0,r.jsx)("button",{type:"button",onClick:function(){let e=window.location.pathname.split("/")[1];window.location.href="/".concat(e,"/wizard/")},style:{padding:"8px 14px",borderRadius:999,border:"1px solid #e5e7eb",background:"white",textDecoration:"none",fontSize:14,color:"#111827",cursor:"pointer"},children:"← Atpakaļ uz formu"})]}),i.length>0&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:(0,r.jsx)("button",{type:"button",onClick:function(){if(window.confirm("Vai tiešām dzēst visas saglabātās tāmes no šīs ierīces?"))try{localStorage.removeItem(n),t([])}catch(e){console.error("Neizdevās iztīrīt saglabātās tāmēs:",e)}},style:{fontSize:12,padding:"6px 10px",borderRadius:999,border:"1px solid #fecaca",background:"#fef2f2",color:"#b91c1c",cursor:"pointer"},children:"Dzēst visas no šīs ierīces"})}),0===i.length?(0,r.jsxs)("div",{style:{background:"white",borderRadius:12,padding:20,border:"1px dashed #d1d5db",textAlign:"center",color:"#6b7280",fontSize:14},children:["Šobrīd nav saglabātu tāmju pēdējo 7 dienu laikā.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{style:{fontSize:12},children:"Uzģenerē jaunu tāmi formā – pēc Excel lejupielādes tā parādīsies šeit."})]}):(0,r.jsx)("div",{style:{display:"grid",gap:12},children:i.map((e,t)=>{var i,s;let n="number"==typeof e.totalRooms?e.totalRooms:Array.isArray(e.rooms)?e.rooms.length:null,o=(null==(i=e.address)?void 0:i.trim())||(null==(s=e.claimNumber)?void 0:s.trim())||"Tāme #".concat(t+1);return(0,r.jsxs)("div",{style:{background:"white",borderRadius:12,padding:16,boxShadow:"0 1px 3px rgba(0,0,0,0.06)",border:"1px solid #e5e7eb"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:4},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:600,fontSize:15},children:o}),(0,r.jsxs)("div",{style:{marginTop:4,fontSize:13,color:"#4b5563"},children:[e.insurer&&(0,r.jsxs)("span",{children:["Apdrošinātājs: ",(0,r.jsx)("strong",{children:e.insurer})]}),e.claimNumber&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"Lietas Nr.: ",(0,r.jsx)("strong",{children:e.claimNumber})]}),null!==n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"Telpas: ",(0,r.jsx)("strong",{children:n})]})]})]}),(0,r.jsxs)("div",{style:{textAlign:"right",fontSize:12,color:"#6b7280"},children:[(0,r.jsx)("div",{style:{fontWeight:500},children:"Izveidota"}),(0,r.jsx)("div",{children:function(e){if(!e)return"—";let t=new Date(e);return Number.isNaN(t.getTime())?"—":t.toLocaleString("lv-LV",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}(e.date||e.createdAt)}),e.id&&(0,r.jsxs)("div",{style:{marginTop:4,fontSize:11,color:"#9ca3af"},children:["ID: ",e.id]})]})]}),Array.isArray(e.rooms)&&e.rooms.length>0&&(0,r.jsxs)("div",{style:{marginTop:8,display:"flex",flexWrap:"wrap",gap:6,fontSize:11},children:[e.rooms.slice(0,4).map((e,t)=>(0,r.jsxs)("span",{style:{padding:"4px 8px",borderRadius:999,background:"#f3f4f6",border:"1px solid #e5e7eb"},children:[e.type||"Telpa"," ",e.index||""]},e.id||t)),e.rooms.length>4&&(0,r.jsxs)("span",{style:{fontSize:11,color:"#6b7280"},children:["+ vēl ",e.rooms.length-4]})]})]},e.id||t)})})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=228)),_N_E=e.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{4857:(e,t,l)=>{l.r(t),l.d(t,{default:()=>f});var a=l(7876),i=l(4232);let n=["Swedbank","Gjensidige","Compensa","IF","BTA","Balta"],r=["Komerctelpa","Dzīvojamā ēka"],o=["Privātmāja","Daudzdzīvokļu māja","Rindu māja","Cits"],s=["CTA","Plūdi","Uguns","Koks","Cits"],d=["Jā","Nē"],c=["Virtuve","Guļamistaba","Koridors","Katla telpa","Dzīvojamā istaba","Vannas istaba","Tualete","Garderobe","Cits"];function u(e){if(null==e||""===e)return 0;let t=parseFloat(String(e).replace(/\s+/g,"").replace(",","."));return Number.isFinite(t)?t:0}function m(e){if(!e)return"";let t=String(e).trim().toLowerCase().replace("\xb2","2").replace("\xa0"," ").replace("  "," ");return"gb."===t||"gab."===t||"gab"===t?"gab":"m2"===t||"m 2"===t||"m^2"===t?"m2":"m3"===t||"m 3"===t||"m^3"===t?"m3":"m"===t?"m":"kpl"===t||"kpl."===t?"kpl":"diena"===t?"diena":"c/h"===t?"c/h":"obj."===t||"obj"===t?"obj":t}let g=["m2","m3","m","gab","kpl","diena","obj","c/h"],p=e=>!0===e||1===e||"1"===e||"string"==typeof e&&"true"===e.trim().toLowerCase()||"string"==typeof e&&"yes"===e.trim().toLowerCase(),h=e=>{var t,l;for(let t of["is_child","child","apakspozicija","apakšpozīcija","isSub","is_sub"])if(t in e&&p(e[t]))return!0;if(e.childOf||e.parent_uid||e.parentId||e.parent||e.parent_name||e.parentName)return!0;let a=Number(null!=(l=null!=(t=e.level)?t:e.lvl)?l:e.depth);return!!Number.isFinite(a)&&!!(a>1)},b=(e,t)=>{var l,a,i,n,r;return{name:e.name||"",unit:m(e.unit||t||""),coeff:u(null!=(l=e.coeff)?l:1),labor:u(null!=(a=e.labor)?a:0),materials:u(null!=(n=e.materials)?n:e.labor||e.mechanisms?0:null!=(i=e.unit_price)?i:0),mechanisms:u(null!=(r=e.mechanisms)?r:0)}},v=i.memo(function(e){let{label:t,children:l}=e;return(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:t}),(0,a.jsx)("div",{children:l})]})}),x=i.memo(function(e){let{title:t,children:l}=e;return(0,a.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,a.jsx)("div",{style:{fontSize:18,fontWeight:700,marginBottom:10},children:t}),l]})});function f(){var e,t,p,f;let[C,j]=(0,i.useState)(1),[y,k]=(0,i.useState)(""),[w,S]=(0,i.useState)(""),[R,z]=(0,i.useState)(""),[N,B]=(0,i.useState)(""),[L,I]=(0,i.useState)("Balta"),[D,T]=(0,i.useState)(""),[F,U]=(0,i.useState)(""),[A,_]=(0,i.useState)(""),[M,O]=(0,i.useState)(""),[E,J]=(0,i.useState)(""),[P,K]=(0,i.useState)("Nē"),[V,W]=(0,i.useState)("Nē"),[q,G]=(0,i.useState)("Nē"),[H,X]=(0,i.useState)("Nē"),[Y,Z]=(0,i.useState)(""),[Q,$]=(0,i.useState)(c.reduce((e,t)=>(e[t]={checked:!1,count:1,custom:""},e),{})),[ee,et]=(0,i.useState)([]),[el,ea]=(0,i.useState)({}),[ei,en]=(0,i.useState)(null),[er,eo]=(0,i.useState)([]),[es,ed]=(0,i.useState)("");window.location.hostname.endsWith("github.io")||window.location.pathname.startsWith("/eksperti"),(0,i.useEffect)(()=>{if("Balta"!==L)return void eo([]);ed(""),fetch("prices/balta.json").then(e=>{if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()}).then(e=>{eo((Array.isArray(e.items)?e.items:[]).map((e,t)=>{var l,a,i,n,r,o;let s=(e.category||"").trim(),d=(e.subcategory||e.subcat||e.group||e.grupa||e["apakškategorija"]||"").toString().trim(),c=String(null!=(l=e.id)?l:t),g=(e.name||"").trim();return{...e,id:c,name:g,category:s,subcategory:d,unit:m(e.unit),unit_price:u(e.unit_price),labor:u(null!=(a=e.labor)?a:e.darbs),materials:u(null!=(n=null!=(i=e.materials)?i:e.materiāli)?n:e.materiali),mechanisms:u(null!=(o=null!=(r=e.mechanisms)?r:e.mehānismi)?o:e.mehanismi),uid:[s,d,c,g].join("::")}}))}).catch(e=>ed("Neizdevās ielādēt BALTA cenas: ".concat(e.message)))},[L]);let ec=(0,i.useMemo)(()=>Array.from(new Set(er.map(e=>e.category).filter(Boolean))),[er]),eu=(0,i.useMemo)(()=>{let e=new Set(g);return er.forEach(t=>t.unit&&e.add(m(t.unit))),Array.from(e)},[er]),[em,eg]=(0,i.useState)([]);function ep(e,t,l,a){ea(i=>{let n=[...i[e]||[]],r={...n[t],[l]:a};return n[t]=r,{...i,[e]:n}})}(0,i.useEffect)(()=>eg(function(){try{let e=localStorage.getItem("tames_profils_saglabatie");return e?JSON.parse(e):[]}catch(e){return[]}}()),[]),(0,i.useEffect)(()=>{let e=[];Object.entries(Q).forEach(t=>{let[l,a]=t;if(!a.checked)return;let i=Math.max(1,Number(a.count)||1);for(let t=1;t<=i;t++){let i="".concat(l,"-").concat(t),n=ee.find(e=>e.id===i);e.push({id:i,type:"Cits"===l?a.custom||"Cits":l,index:t,note:(null==n?void 0:n.note)||""})}}),et(e),ea(t=>{let l={};return e.forEach(e=>{l[e.id]=t[e.id]||[{category:"",itemUid:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]}),l})},[Q]);let eh=(0,i.useMemo)(()=>{switch(C){case 1:return!!N.trim();case 2:return!!L;case 3:return!!D&&("Dzīvojamā ēka"!==D||!!F);case 4:return!!M&&("Cits"!==M||!!E.trim());case 5:return["Jā","Nē"].includes(P);case 6:return["Jā","Nē"].includes(V);case 7:return["Jā","Nē"].includes(q);case 8:return"Nē"===H||"Jā"===H&&!!Y&&Number(Y)>=0;case 9:return Object.values(Q).some(e=>e.checked);default:return!0}},[C,N,L,D,F,M,E,P,V,q,H,Y,Q]);async function eb(){try{var e,t;let a=e=>String(e).padStart(2,"0"),i=await l.e(22).then(l.t.bind(l,1980,23)),n=(null==i?void 0:i.default)||i,r=(null==(e=window.__NEXT_DATA__)?void 0:e.assetPrefix)||window.location.pathname.startsWith("/eksperti")?"/eksperti":"",o="".concat(r,"/templates/balta_template.xlsx"),s=await fetch(o);if(!s.ok)return void alert("Neizdevās ielādēt ".concat(o,". Pārliecinies, ka fails ir public/templates/balta_template.xlsx"));let d=await s.arrayBuffer(),c=new n.Workbook;await c.xlsx.load(d);let g=c.getWorksheet("Tāme")||c.worksheets[0],p=c.addWorksheet("Tāme (izvade)",{views:[{showGridLines:!1}]}),v={name:"Calibri",size:11},x="#,##0.00",f={style:"thin"},C={top:f,left:f,bottom:f,right:f},j={type:"pattern",pattern:"solid",fgColor:{argb:"FFF3F6FD"}},y={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},k=new Date,w="".concat(k.getFullYear()).concat(a(k.getMonth()+1)).concat(a(k.getDate())),S="Balta"===L?"B-".concat(w):w,z="Balta"===L?"LOKĀLĀ TĀME NR.".concat(S):"TĀMES NR.: ".concat(S),B=k.toLocaleDateString("lv-LV",{year:"numeric",month:"long",day:"numeric"});p.getCell("A1").value="Pasūtītājs: ".concat(L||"Balta"),p.getCell("A2").value="Objekts: ".concat(D||"").concat(F?" – "+F:""),p.getCell("A3").value="Objekta adrese: ".concat(N||""),p.getCell("A8").value="Rīga, ".concat(B),p.getCell("A9").value="Pamatojums: apdrošināšanas lieta Nr. ".concat(R||"—"),p.getCell("J1").value="LV GROUP SIA",p.getCell("J2").value="Reģ. Nr.: LV40003216553",p.getCell("J3").value="Banka: Luminor",p.getCell("J4").value="Konts: LV12RIKO0002012345678",p.mergeCells(6,2,6,12);let I=p.getCell(6,2);I.value=z,I.font={...v,size:16,bold:!0},I.alignment={horizontal:"center",vertical:"middle"};let T=[];if(ee.forEach(e=>{(el[e.id]||[]).forEach(t=>{var l,a,i,n,r,o,s,d,c,g,p,v,x,f,C;let j=u(t.quantity);if(!j)return;let y=er.find(e=>e.uid===t.itemUid)||er.find(e=>e.id===t.itemId);if(!y)return;let k=m(t.unit||y.unit||""),w=u(null!=(a=null!=(l=t.labor)?l:y.labor)?a:0),S=u(null!=(n=null!=(i=t.materials)?i:y.materials)?n:0),R=u(null!=(o=null!=(r=t.mechanisms)?r:y.mechanisms)?o:0),z=w+S+R||u(null!=(d=null!=(s=t.unit_price)?s:y.unit_price)?d:0);for(let l of(T.push({isChild:!1,room:"".concat(e.type," ").concat(e.index),name:t.itemName||y.name||"",unit:k,qty:j,labor:w,materials:S,mechanisms:R,unitPrice:z}),((e,t)=>{if(Array.isArray(e.children)&&e.children.length)return e.children.map(t=>{var l,a,i,n;return b({name:null!=(a=null!=(l=t.name)?l:t.title)?a:"",unit:t.unit,coeff:null!=(i=t.coeff)?i:t.multiplier,labor:t.labor,materials:null!=(n=t.materials)?n:t.labor||t.mechanisms?0:t.unit_price,mechanisms:t.mechanisms},e.unit)});let l=t.filter(t=>((e,t)=>{let l=[t.uid,t.id,t.name].filter(Boolean);return[e.childOf,e.parent_uid,e.parentId,e.parent,e.parent_name,e.parentName].filter(Boolean).some(e=>l.includes(e))})(t,e));if(l.length)return l.map(t=>b(t,e.unit));let a=t.filter(t=>h(t)&&t.category===e.category&&t.subcategory===e.subcategory);return a.length?a.map(t=>b(t,e.unit)):[]})(y,er))){let t=u(null!=(c=l.coeff)?c:1)*j;T.push({isChild:!0,room:"".concat(e.type," ").concat(e.index),name:l.name||"",unit:m(l.unit||k),qty:t,labor:u(null!=(g=l.labor)?g:0),materials:u(null!=(p=l.materials)?p:0),mechanisms:u(null!=(v=l.mechanisms)?v:0),unitPrice:u(null!=(x=l.labor)?x:0)+u(null!=(f=l.materials)?f:0)+u(null!=(C=l.mechanisms)?C:0)})}})}),!T.length)return void alert("Nav nevienas pozīcijas ar daudzumu.");for(let e of(p.getCell(13,1).value="Nr.",p.getCell(13,2).value="Darbu nosaukums",p.getCell(13,3).value="Mērv.",p.getCell(13,4).value="Daudz.",p.mergeCells(13,5,13,8),p.getCell(13,5).value="Vienības cena, EUR",p.mergeCells(13,9,13,12),p.getCell(13,9).value="Summa, EUR",p.getCell(14,5).value="Darbs",p.getCell(14,6).value="Materiāli",p.getCell(14,7).value="Mehānismi",p.getCell(14,8).value="Cena",p.getCell(14,9).value="Darbs",p.getCell(14,10).value="Materiāli",p.getCell(14,11).value="Mehānismi",p.getCell(14,12).value="Kopā",[13,14])){let t=p.getRow(e);for(let e=1;e<=12;e++){let l=t.getCell(e);l.font={...v,bold:!0},l.alignment={horizontal:"center",vertical:"middle",wrapText:!0},l.fill=y,l.border=C}t.height=22}let U=15,A=1,_=null,M=null,O=new Map;for(let[e,t]of(T.forEach(e=>{O.has(e.room)||O.set(e.room,[]),O.get(e.room).push(e)}),O.entries())){p.mergeCells(U,2,U,12);let l=p.getCell(U,2);for(let a of(l.value=e,l.fill=j,l.font={...v,bold:!0},l.alignment={wrapText:!0,vertical:"middle"},l.border={bottom:f},p.getRow(U).height=18,U++,t)){let e=p.getRow(U);e.getCell(1).value=a.isChild?"":A++,e.getCell(2).value=a.isChild?"    ".concat(a.name):a.name,e.getCell(3).value=a.unit,e.getCell(4).value=a.qty;let t=a.labor||0,l=a.materials||0,i=a.mechanisms||0,n=t+l+i>0;for(let r of(e.getCell(5).value=n?t:a.unitPrice,e.getCell(6).value=n?l:0,e.getCell(7).value=n?i:0,e.getCell(8).value={formula:"ROUND(SUM(E".concat(U,":G").concat(U,"),2)")},e.getCell(9).value={formula:"ROUND(E".concat(U,"*D").concat(U,",2)")},e.getCell(10).value={formula:"ROUND(F".concat(U,"*D").concat(U,",2)")},e.getCell(11).value={formula:"ROUND(G".concat(U,"*D").concat(U,",2)")},e.getCell(12).value={formula:"ROUND(H".concat(U,"*D").concat(U,",2)")},e.getCell(4).numFmt="#,##0.00",[5,6,7,8,9,10,11,12]))e.getCell(r).numFmt=x;let r=(U-15)%2==1;for(let t=1;t<=12;t++){let l=e.getCell(t);r&&(l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF9FAFB"}}),l.border=C,l.font={...v,italic:!!a.isChild},l.alignment=2===t?{wrapText:!0,vertical:"middle"}:{vertical:"middle",horizontal:"right"}}null===_&&(_=U),M=U,U++}}let E=e=>{p.getCell(e).font={...v,bold:!0}},J=U+1;for(let e of(p.getCell("B".concat(J)).value="Kopā",p.getCell("I".concat(J)).value={formula:_?"SUM(I".concat(_,":I").concat(M,")"):"0"},p.getCell("J".concat(J)).value={formula:_?"SUM(J".concat(_,":J").concat(M,")"):"0"},p.getCell("K".concat(J)).value={formula:_?"SUM(K".concat(_,":K").concat(M,")"):"0"},p.getCell("L".concat(J)).value={formula:_?"SUM(L".concat(_,":L").concat(M,")"):"0"},[9,10,11,12]))p.getCell(J,e).numFmt=x;E("B".concat(J));let P=J+1;p.getCell("B".concat(P)).value="Materiālu, grunts apmaiņas un būvgružu transporta izdevumi",p.getCell("C".concat(P)).value=.07,p.getCell("J".concat(P)).value={formula:"ROUND(J".concat(J,"*C").concat(P,",2)")},p.getCell("L".concat(P)).value={formula:"J".concat(P)},p.getCell("J".concat(P)).numFmt=x,p.getCell("L".concat(P)).numFmt=x;let K=P+1;for(let e of(p.getCell("B".concat(K)).value="Tiešās izmaksas kopā",p.getCell("I".concat(K)).value={formula:"I".concat(J)},p.getCell("J".concat(K)).value={formula:"ROUND(J".concat(J,"+J").concat(P,",2)")},p.getCell("K".concat(K)).value={formula:"K".concat(J)},p.getCell("L".concat(K)).value={formula:"ROUND(I".concat(K,"+J").concat(K,"+K").concat(K,",2)")},[9,10,11,12]))p.getCell(K,e).numFmt=x;E("B".concat(K));let V=K+1;p.getCell("B".concat(V)).value="Virsizdevumi",p.getCell("C".concat(V)).value=.09,p.getCell("L".concat(V)).value={formula:"ROUND(L".concat(K,"*C").concat(V,",2)")},p.getCell("L".concat(V)).numFmt=x;let W=V+1;p.getCell("B".concat(W)).value="Peļņa",p.getCell("C".concat(W)).value=.07,p.getCell("L".concat(W)).value={formula:"ROUND(L".concat(K,"*C").concat(W,",2)")},p.getCell("L".concat(W)).numFmt=x;let q=W+1;p.getCell("B".concat(q)).value="Darba devēja sociālais nodoklis",p.getCell("C".concat(q)).value=.2359,p.getCell("I".concat(q)).value={formula:"ROUND(I".concat(J,"*C").concat(q,",2)")},p.getCell("L".concat(q)).value={formula:"I".concat(q)},p.getCell("I".concat(q)).numFmt=x,p.getCell("L".concat(q)).numFmt=x;let G=q+1;p.getCell("B".concat(G)).value="Kopējās izmaksas",p.getCell("L".concat(G)).value={formula:"ROUND(L".concat(K,"+L").concat(V,"+L").concat(W,"+L").concat(q,",2)")},p.getCell("L".concat(G)).numFmt=x,E("B".concat(G)),E("L".concat(G));let H=G+1;p.getCell("B".concat(H)).value="PVN",p.getCell("C".concat(H)).value=.21,p.getCell("L".concat(H)).value={formula:"ROUND(L".concat(G,"*C").concat(H,",2)")},p.getCell("L".concat(H)).numFmt=x;let X=H+1;for(let e of(p.getCell("B".concat(X)).value="Pavisam kopā",p.getCell("L".concat(X)).value={formula:"ROUND(L".concat(G,"+L").concat(H,",2)")},p.getCell("L".concat(X)).numFmt=x,E("B".concat(X)),E("L".concat(X)),p.getCell("J9").value="Tāmes summa euro :",p.getCell("L9").value={formula:"L".concat(G)},p.getCell("L9").numFmt=x,p.getCell("J10").value="PVN 21%:",p.getCell("L10").value={formula:"L".concat(H)},p.getCell("L10").numFmt=x,p.getCell("J11").value="Pavisam kopā euro:",p.getCell("L11").value={formula:"L".concat(X)},p.getCell("L11").numFmt=x,[J,P,K,V,W,q,G,H,X]))for(let l=1;l<=12;l++){let a=p.getCell(e,l);a.border=C,a.font={...v,bold:(null==(t=a.font)?void 0:t.bold)||!1},a.alignment=2===l?{wrapText:!0,vertical:"middle"}:{vertical:"middle",horizontal:"right"}}let Y=X+3;p.getCell("B".concat(Y)).value="Piezīmes:",p.getCell("B".concat(Y)).font={...v,bold:!0},p.mergeCells(Y,2,Y,12);let Z=Y+1;for(let e of["1. Tāmes derīguma termiņš – 1 mēnesis.","2. Tāme sastādīta provizoriski, atbilstoši bojātā īpašuma apskates protokolam un bildēm.","3. Iespējami slēpti defekti, kuri atklāsies remontdarbu laikā.","4. Tāme ir sagatavota elektroniski un ir autorizēta ar Nr.".concat(S,".")]){p.mergeCells(Z,2,Z,12);let t=p.getCell(Z,2);t.value=e,t.font=v,t.alignment={wrapText:!0,vertical:"top"},Z++}for(let e of ee.map(e=>(e.note||"").trim()).filter(Boolean)){p.mergeCells(Z,2,Z,12);let t=p.getCell(Z,2);t.value=e,t.font=v,t.alignment={wrapText:!0,vertical:"top"},Z++}let Q=Z+2;p.mergeCells(Q,2,Q,6),p.getCell(Q,2).value="SASTĀDĪJA:",p.getCell(Q,2).font={...v,bold:!0},p.getCell(Q+1,2).value="Būvkomersanta Nr.:",p.mergeCells(Q+1,3,Q+1,6),p.getCell(Q+2,2).value="Vārds, uzvārds:",p.mergeCells(Q+2,3,Q+2,6),p.getCell(Q+3,2).value="sert. nr.:",p.mergeCells(Q+3,3,Q+3,6);let $="Balta"===L?"AAS BALTA":L||"";p.mergeCells(Q,9,Q,12),p.getCell(Q,9).value="SASKAŅOTS:",p.getCell(Q,9).font={...v,bold:!0},p.mergeCells(Q+1,9,Q+1,12),p.getCell(Q+1,9).value=$,p.mergeCells(Q+2,9,Q+2,12),p.getCell(Q+2,9).value="";let et=[6,56,12,10,14,14,14,14,16,16,16,18];for(let e=1;e<=12;e++)p.getColumn(e).width=et[e-1];c.removeWorksheet(g.id),p.name="Tāme";let ea=await c.xlsx.writeBuffer(),ei=new Blob([ea],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),en=URL.createObjectURL(ei),eo=document.createElement("a");eo.href=en,eo.download="Tame_Balta_".concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e=>String(e).padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate()),"_").concat(t(e.getHours()),"-").concat(t(e.getMinutes()))}(),".xlsx"),document.body.appendChild(eo),eo.click(),eo.remove(),URL.revokeObjectURL(en)}catch(e){console.error("Excel export error:",e),alert("Neizdevās izveidot Excel failu. Skaties konsolē kļūdu.")}}let ev=i.useCallback(e=>t=>e(t.target.value),[]),ex=i.useCallback(e=>t=>e(t.target.value),[]),ef=Math.round((C-1)/11*100);return(0,a.jsx)("div",{style:{minHeight:"100vh",background:"#f7fafc",color:"#111827"},children:(0,a.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto",padding:16},children:[(0,a.jsx)("div",{style:{background:"white",padding:12,borderRadius:12,marginBottom:12},children:(0,a.jsx)(v,{label:"Lietas Nr.",children:(0,a.jsx)("input",{value:null!=R?R:"",onChange:ev(z),placeholder:"piem., CLV1234567",autoComplete:"off",spellCheck:!1,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),(0,a.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:16},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{fontSize:22,fontWeight:800},children:["Apskates forma – solis ",C,"/",12]}),(0,a.jsx)("div",{style:{fontSize:13,color:"#4b5563"},children:"Tāmētājs ievada tikai daudzumu. Cenas netiek rādītas formā un parādīsies tikai gala tāmē."})]}),(0,a.jsxs)("div",{style:{background:"white",padding:12,borderRadius:12,width:360},children:[(0,a.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"Tāmētāja profils (neobligāti)"}),(0,a.jsx)("input",{value:null!=y?y:"",onChange:ev(k),placeholder:"Vārds, Uzvārds",autoComplete:"off",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:6}}),(0,a.jsx)("input",{value:null!=w?w:"",onChange:ev(S),placeholder:"E-pasts",autoComplete:"off",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})]})]}),(0,a.jsx)("div",{style:{height:8,background:"#e5e7eb",borderRadius:999,marginBottom:16},children:(0,a.jsx)("div",{style:{width:"".concat(ef,"%"),height:8,background:"#10b981",borderRadius:999}})}),1===C&&(0,a.jsx)(x,{title:"1. Objekta adrese",children:(0,a.jsx)(v,{label:"Objekta adrese",children:(0,a.jsx)("input",{value:null!=N?N:"",onChange:ev(B),placeholder:"Iela 1, Pilsēta",autoComplete:"off",spellCheck:!1,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),2===C&&(0,a.jsxs)(x,{title:"2. Apdrošināšanas kompānija",children:[(0,a.jsx)(v,{label:"Izvēlies kompāniju",children:(0,a.jsx)("select",{value:L,onChange:e=>I(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:n.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})}),"Balta"===L&&(0,a.jsx)("div",{style:{fontSize:12,color:es?"#b91c1c":"#065f46"},children:es||(er.length?"Ielādēts BALTA cenrādis (".concat(er.length," pozīcijas)"):"Notiek BALTA cenrāža ielāde...")})]}),3===C&&(0,a.jsxs)(x,{title:"3. Kur notika negadījums?",children:[(0,a.jsx)(v,{label:"Vieta",children:(0,a.jsxs)("select",{value:D,onChange:e=>T(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,a.jsx)("option",{value:"",children:"— Izvēlies —"}),r.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),"Dzīvojamā ēka"===D&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{label:"3.1. Dzīvojamās ēkas tips",children:(0,a.jsxs)("select",{value:F,onChange:e=>U(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,a.jsx)("option",{value:"",children:"— Izvēlies —"}),o.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),"Cits"===F&&(0,a.jsx)(v,{label:"3.1.1. Norādi",children:(0,a.jsx)("input",{value:null!=A?A:"",onChange:ev(_),placeholder:"NI tips",autoComplete:"off",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]})]}),4===C&&(0,a.jsxs)(x,{title:"4. Kas notika ar nekustamo īpašumu?",children:[(0,a.jsx)(v,{label:"Notikuma veids",children:(0,a.jsxs)("select",{value:M,onChange:e=>O(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,a.jsx)("option",{value:"",children:"— Izvēlies —"}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),"Cits"===M&&(0,a.jsx)(v,{label:"4.1. Norādi",children:(0,a.jsx)("input",{value:null!=E?E:"",onChange:ev(J),placeholder:"Notikuma apraksts",autoComplete:"off",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),5===C&&(0,a.jsx)(x,{title:"5. Elektrības traucējumi",children:(0,a.jsxs)(v,{label:"Elektrības traucējumi",children:[(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,a.jsx)("input",{type:"radio",name:"el",checked:"Jā"===P,onChange:()=>K("Jā")})," Ir"]}),(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[(0,a.jsx)("input",{type:"radio",name:"el",checked:"Nē"===P,onChange:()=>K("Nē")})," Nav"]})]})}),6===C&&(0,a.jsx)(x,{title:"6. Vai nepieciešama žāvēšana?",children:(0,a.jsx)(v,{label:"Žāvēšana",children:d.map(e=>(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,a.jsx)("input",{type:"radio",name:"dry",checked:V===e,onChange:()=>W(e)})," ",e]},e))})}),7===C&&(0,a.jsx)(x,{title:"7. Vai bojāts kopīpašums?",children:(0,a.jsx)(v,{label:"Kopīpašums",children:d.map(e=>(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,a.jsx)("input",{type:"radio",name:"common",checked:q===e,onChange:()=>G(e)})," ",e]},e))})}),8===C&&(0,a.jsxs)(x,{title:"8. Zaudējuma novērtējums pēc klienta vārdiem",children:[(0,a.jsx)(v,{label:"Vai ir zināma summa?",children:d.map(e=>(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,a.jsx)("input",{type:"radio",name:"loss",checked:H===e,onChange:()=>X(e)})," ",e]},e))}),"Jā"===H&&(0,a.jsx)(v,{label:"Summa EUR",children:(0,a.jsx)("input",{type:"number",inputMode:"decimal",step:"0.01",value:null!=Y?Y:"",onChange:ex(Z),autoComplete:"off",style:{width:200,border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"€ summa"})})]}),9===C&&(0,a.jsx)(x,{title:"9. Izvēlies telpu/as, kas tika bojātas",children:(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(240px,1fr))",gap:12},children:c.map(e=>{var t;return(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsxs)("label",{style:{fontWeight:600,display:"flex",alignItems:"center, ",gap:8},children:[(0,a.jsx)("input",{type:"checkbox",checked:Q[e].checked,onChange:t=>$({...Q,[e]:{...Q[e],checked:t.target.checked}})}),e]}),Q[e].checked&&(0,a.jsxs)("div",{style:{marginTop:8},children:["Cits"===e&&(0,a.jsx)("input",{value:String(null!=(t=Q[e].custom)?t:""),onChange:t=>$({...Q,[e]:{...Q[e],custom:t.currentTarget.value}}),placeholder:"Telpas nosaukums",autoComplete:"off",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:8}}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{children:"Daudzums:"}),(0,a.jsx)("input",{type:"number",min:1,value:Q[e].count,onChange:t=>$({...Q,[e]:{...Q[e],count:Math.max(1,Number(t.target.value||1))}}),style:{width:90,border:"1px solid #e5e7eb",borderRadius:10,padding:6}})]})]})]},e)})})}),10===C&&(0,a.jsxs)(x,{title:"10. Izvēlētās telpas",children:[0===ee.length?(0,a.jsx)("div",{style:{color:"#6b7280"},children:"Nav izvēlētas telpas 9. solī."}):(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:12},children:ee.map(e=>{let t=(el[e.id]||[]).filter(e=>e.itemUid&&e.quantity).length,l=(e.id,[]);return(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,background:"#f9fafb"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[(0,a.jsxs)("div",{style:{fontWeight:700},children:[e.type," ",e.index]}),(0,a.jsx)("button",{type:"button",onClick:()=>(function(e){let[t,l]=String(e).split("-"),a=parseInt(l,10)||1;ea(e=>{var l,i;let n={...e},r=(null==(l=Q[t])?void 0:l.checked)?Number((null==(i=Q[t])?void 0:i.count)||1):0;if(r<=0)return n;for(let e=a+1;e<=r;e++){let l="".concat(t,"-").concat(e),a="".concat(t,"-").concat(e-1);n[l]&&(n[a]=n[l])}return delete n["".concat(t,"-").concat(r)],n}),$(e=>{let l=e[t];if(!l)return e;let a=(Number(l.count)||1)-1,i={...e};return a<=0?i[t]={...l,checked:!1,count:1}:i[t]={...l,checked:!0,count:a},i}),en(t=>t===e?null:t)})(e.id),title:"Dzēst telpu",style:{marginLeft:"auto",padding:"4px 8px",borderRadius:8,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"})]}),(0,a.jsxs)("div",{style:{fontSize:13,color:"#4b5563",marginBottom:8},children:["Pozīcijas: ",t]}),l.length>0&&(0,a.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:8},children:l.map(e=>(0,a.jsx)("span",{style:{background:"#e5e7eb",borderRadius:999,padding:"4px 10px",fontSize:12},children:e},e))}),(0,a.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,a.jsx)("button",{type:"button",onClick:()=>{en(e.id),j(11)},style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Atvērt"})})]},e.id)})}),ee.length>0&&(0,a.jsxs)("div",{style:{marginTop:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("button",{type:"button",onClick:()=>j(9),style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"+ Pievienot vēl telpu"}),ee.every(e=>(el[e.id]||[]).some(e=>e.itemUid&&e.quantity))&&(0,a.jsx)("button",{type:"button",onClick:eb,style:{padding:"12px 16px",borderRadius:12,background:"#059669",color:"white",border:0},children:"Viss pabeigts — izveidot tāmi"})]})]}),11===C&&ei&&(0,a.jsxs)(x,{title:"11. Pozīcijas un apjomi – ".concat(null==(e=ee.find(e=>e.id===ei))?void 0:e.type," ").concat(null==(t=ee.find(e=>e.id===ei))?void 0:t.index),children:[(0,a.jsx)(v,{label:"Piezīmes",children:(0,a.jsx)("input",{value:null!=(f=null==(p=ee.find(e=>e.id===ei))?void 0:p.note)?f:"",onChange:e=>{var t;return t=e.target.value,void et(e=>e.map(e=>e.id===ei?{...e,note:t}:e))},placeholder:"Papildus informācija",autoComplete:"off",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})}),(0,a.jsx)("div",{style:{fontWeight:700,margin:"12px 0 6px"},children:"Pozīcijas un apjomi"}),(el[ei]||[{category:"",itemUid:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]).map((e,t)=>{var l,i,n;return(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1.1fr 2.2fr 1fr 0.8fr auto",gap:8,alignItems:"end",marginBottom:8},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Kategorija"}),(0,a.jsxs)("select",{value:null!=(l=e.category)?l:"",onChange:e=>{var l;return l=e.target.value,void ea(e=>{let a=[...e[ei]||[]];return a[t]={...a[t],category:l,itemUid:"",itemId:"",itemName:"",unit:"",unit_price:null,labor:0,materials:0,mechanisms:0},{...e,[ei]:a}})},style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,a.jsx)("option",{value:"",children:"— visas —"}),ec.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Pozīcija"}),(0,a.jsxs)("select",{value:null!=(i=e.itemUid)?i:"",onChange:e=>(function(e,t,l){let a=er.find(e=>e.uid===l);ea(l=>{let i=[...l[e]||[]];if(a){var n,r,o,s;i[t]={...i[t],category:a.category||i[t].category||"",itemUid:a.uid,itemId:a.id,itemName:a.name,unit:a.unit||"",unit_price:null!=(n=a.unit_price)?n:null,labor:null!=(r=a.labor)?r:0,materials:null!=(o=a.materials)?o:0,mechanisms:null!=(s=a.mechanisms)?s:0}}else i[t]={...i[t],itemUid:"",itemId:"",itemName:"",unit:"",unit_price:null,labor:0,materials:0,mechanisms:0};return{...l,[e]:i}})})(ei,t,e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,a.jsx)("option",{value:"",children:"— izvēlies pozīciju —"}),er.filter(t=>(!e.category||t.category===e.category)&&!h(t)).map(e=>(0,a.jsxs)("option",{value:e.uid,children:[e.subcategory?"[".concat(e.subcategory,"] "):"",e.name," \xb7 ",e.unit||"—"]},e.uid))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Mērv."}),(0,a.jsxs)("select",{value:m(e.unit)||"",onChange:e=>ep(ei,t,"unit",m(e.target.value)),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,a.jsx)("option",{value:"",children:"—"}),eu.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Daudz."}),(0,a.jsx)("input",{type:"number",min:0,step:"0.01",value:null!=(n=e.quantity)?n:"",onChange:e=>ep(ei,t,"quantity",e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},autoComplete:"off",placeholder:"Skaitlis"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",justifyContent:"flex-end"},children:[(0,a.jsx)("button",{type:"button",onClick:()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ea(l=>({...l,[e]:[...l[e]||[],{category:t||"",itemUid:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]}))})(ei,e.category||""),style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"+ Rinda"}),(0,a.jsx)("button",{type:"button",onClick:()=>{ea(e=>{let l=e[ei]||[];return l.length<=1?e:{...e,[ei]:l.filter((e,l)=>l!==t)}})},style:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"}),(0,a.jsx)("button",{type:"button",onClick:()=>{en(null),j(9)},style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white",color:"#111827"},children:"+ Pievienot vēl telpu"})]})]},t)}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:(0,a.jsx)("button",{type:"button",onClick:()=>{en(null),j(10)},style:{padding:"10px 14px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Saglabāt un atgriezties"})})]}),[1,2,3,4,5,6,7,8,9,12].includes(C)&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[(0,a.jsx)("button",{type:"button",onClick:()=>j(e=>Math.max(1,e-1)),disabled:1===C,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:1===C?"#f3f4f6":"white",color:"#111827"},children:"← Atpakaļ"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(e=>Math.min(12,e+1)),disabled:!eh||12===C,style:{padding:"10px 14px",borderRadius:10,background:eh&&12!==C?"#111827":"#9ca3af",color:"white",border:0},children:12===C?"Beigas":"Tālāk →"})]}),(0,a.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,marginTop:20},children:[(0,a.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Saglabātās tāmēs (šajā pārlūkā)"}),0===em.length?(0,a.jsx)("div",{style:{color:"#6b7280"},children:"Vēl nav saglabātu tāmju."}):(0,a.jsx)("div",{style:{overflowX:"auto"},children:(0,a.jsxs)("table",{style:{width:"100%",fontSize:14},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:[(0,a.jsx)("th",{style:{padding:"8px 12px"},children:"Fails"}),(0,a.jsx)("th",{style:{padding:"8px 12px"},children:"Tāmētājs"}),(0,a.jsx)("th",{style:{padding:"8px 12px"},children:"Datums"})]})}),(0,a.jsx)("tbody",{children:em.map(e=>(0,a.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,a.jsx)("td",{style:{padding:"8px 12px",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e.filename}),(0,a.jsx)("td",{style:{padding:"8px 12px"},children:e.estimator}),(0,a.jsx)("td",{style:{padding:"8px 12px"},children:new Date(e.createdAtISO).toLocaleString()})]},e.id))})]})})]}),(0,a.jsxs)("footer",{style:{paddingBottom:40,marginTop:12,fontSize:12,color:"#6b7280"},children:["Piezīme: cenrādis ielādējas no ",(0,a.jsx)("code",{children:"public/prices/balta.json"})," (Balta 27.08.2024). Cenas netiek rādītas formā; tās parādās tikai gala tāmē."]})]})})}}}]);
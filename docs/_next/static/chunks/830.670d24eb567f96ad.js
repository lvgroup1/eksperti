(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{2383:()=>{},3686:()=>{},4857:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var i=a(7876),n=a(4232),l=a(2770);let s=["Swedbank","Gjensidige","Compensa","IF","BTA","Balta"],r=["Komerctelpa","Dzīvojamā ēka"],o=["Privātmāja","Daudzdzīvokļu māja","Rindu māja","Cits"],d=["CTA","Plūdi","Uguns","Koks","Cits"],c=["Jā","Nē"],u=["Virtuve","Guļamistaba","Koridors","Katla telpa","Dzīvojamā istaba","Vannas istaba","Tualete","Garderobe","Cits"],p={"Jumts/Pārsegums":["Jumts, pārsegums"],Griesti:["Griesti"],Siena:["Sienas, starpsienas"],Grīda:["Grīdas"],Durvis:["Logi un durvis"],Logs:["Logi un durvis"],Fasāde:["Fasāde"],Inženierkomunikācijas:["Inžen.komun.darbi"]};function h(e){if(!e)return"";let t=String(e).trim().toLowerCase().replace("\xb2","2").replace(" "," ");return"gb."===t||"gab."===t||"gab"===t?"gab":"m2"===t||"m 2"===t||"m^2"===t?"m2":"m3"===t||"m 3"===t||"m^3"===t?"m3":"m"===t?"m":"kpl"===t||"kpl."===t?"kpl":"diena"===t?"diena":"c/h"===t?"c/h":"obj."===t||"obj"===t?"obj":t}let m=["m2","m3","m","gab","kpl","diena","obj","c/h"],g="tames_profils_saglabatie";function x(){try{let e=localStorage.getItem(g);return e?JSON.parse(e):[]}catch(e){return[]}}function b(){var e,t,a;let[b,j]=(0,n.useState)(1),[y,v]=(0,n.useState)(""),[f,k]=(0,n.useState)(""),[w,C]=(0,n.useState)(""),[S,I]=(0,n.useState)(""),[R,N]=(0,n.useState)("Balta"),[z,B]=(0,n.useState)(""),[L,D]=(0,n.useState)(""),[A,T]=(0,n.useState)(""),[E,J]=(0,n.useState)(""),[M,P]=(0,n.useState)(""),[K,O]=(0,n.useState)("Nē"),[_,U]=(0,n.useState)("Nē"),[F,q]=(0,n.useState)("Nē"),[G,V]=(0,n.useState)("Nē"),[W,H]=(0,n.useState)(""),[X,Y]=(0,n.useState)(u.reduce((e,t)=>(e[t]={checked:!1,count:1,custom:""},e),{})),[Z,Q]=(0,n.useState)([]),[$,ee]=(0,n.useState)({}),[et,ea]=(0,n.useState)(null),[ei,en]=(0,n.useState)([]),[el,es]=(0,n.useState)("");(0,n.useEffect)(()=>{"Balta"===R?(es(""),fetch("prices/balta.json").then(e=>{if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()}).then(e=>{en((Array.isArray(e.items)?e.items:[]).map(e=>({...e,unit:h(e.unit)})))}).catch(e=>es("Neizdevās ielādēt BALTA cenas: ".concat(e.message)))):en([])},[R]);let er=(0,n.useMemo)(()=>Array.from(new Set(ei.map(e=>e.category))),[ei]),eo=(0,n.useMemo)(()=>{let e=new Set(m);return ei.forEach(t=>t.unit&&e.add(h(t.unit))),Array.from(e)},[ei]),[ed,ec]=(0,n.useState)([]);function eu(e,t,a,i){ee(n=>{let l=[...n[e]||[]],s={...l[t],[a]:i};return l[t]=s,{...n,[e]:l}})}(0,n.useEffect)(()=>ec(x()),[]),(0,n.useEffect)(()=>{let e=[];Object.entries(X).forEach(t=>{let[a,i]=t;if(i.checked){let t=Math.max(1,Number(i.count)||1);for(let n=1;n<=t;n++){let t="".concat(a,"-").concat(n),l=Z.find(e=>e.id===t);e.push({id:t,type:"Cits"===a?i.custom||"Cits":a,index:n,areas:(null==l?void 0:l.areas)||[],note:(null==l?void 0:l.note)||""})}}}),Q(e),ee(t=>{let a={};return e.forEach(e=>a[e.id]=t[e.id]||[{category:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]),a})},[X]);let ep=(0,n.useMemo)(()=>{switch(b){case 1:return!!S.trim();case 2:return!!R;case 3:return!!z&&("Dzīvojamā ēka"!==z||!!L);case 4:return!!E&&("Cits"!==E||!!M.trim());case 5:return["Jā","Nē"].includes(K);case 6:return["Jā","Nē"].includes(_);case 7:return["Jā","Nē"].includes(F);case 8:return"Nē"===G||"Jā"===G&&!!W&&Number(W)>=0;case 9:return Object.values(X).some(e=>e.checked);default:return!0}},[b,S,R,z,L,E,M,K,_,F,G,W,X]);function eh(e){let t=Z.find(t=>t.id===e);if(!t)return[];let a=new Set;return(t.areas||[]).forEach(e=>(p[e]||[]).forEach(e=>a.add(e))),Array.from(a)}async function em(){let e=await fetch("templates/balta_template.xlsx");if(!e||!e.ok)return void alert("Neizdevās ielādēt templates/balta_template.xlsx (ieliec to public/templates/)");let t=await e.arrayBuffer(),a=l.LF(t,{type:"array"}),i=a.SheetNames.includes("Tāme")?"Tāme":a.SheetNames[0],n=a.Sheets[i],s=(e,t,a)=>{let i=n[e]||{};i.t=t,null==a?delete i.v:i.v=a,delete i.f,n[e]=i},r=(e,t)=>{let a=n[e]||{};a.t="n",a.f=t,delete a.v,n[e]=a},o=e=>{let t=n[e];t&&(delete t.v,delete t.f,t.t="s",t.v="")},d=new Date().toLocaleDateString("lv-LV",{year:"numeric",month:"long",day:"numeric"});s("A1","s","Pasūtītājs: ".concat(R||"Balta")),s("A2","s","Objekts: ".concat(z||"").concat(L?" – "+L:"")),s("A3","s","Objekta adrese: ".concat(S||"")),s("A8","s","Rīga, ".concat(d)),s("A9","s","Pamatojums: apdrošināšanas lieta Nr. ".concat(w||"—"));let c=[];if(Z.forEach(e=>{($[e.id]||[]).forEach(t=>{let a=Number(t.quantity)||0;t.itemId&&a>0&&c.push({room:"".concat(e.type," ").concat(e.index),name:t.itemName||"",unit:h(t.unit)||"",qty:a,unitPrice:Number(t.unit_price)||0})})}),0===c.length)return void alert("Nav ievadītu pozīciju ar daudzumu.");c.sort((e,t)=>e.room.localeCompare(t.room)||e.name.localeCompare(t.name));let u=["A","B","C","D","E","F","G","H","I","J","K","L"];for(let e=15;e<=2e3;e++)for(let t of u)o("".concat(t).concat(e));let p=15,m=1,b=null,j=null,v=c.reduce((e,t)=>{var a;return(e[a=t.room]||(e[a]=[])).push(t),e},{}),f={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[]},k=(e,t)=>{let a=e.replace(/[0-9]/g,""),i="number"==typeof t?String(t):t||"";f[a].push(i)};for(let e of Object.keys(v))for(let t of(s("A".concat(p),"s",""),k("A".concat(p),""),s("B".concat(p),"s",e),k("B".concat(p),e),p++,v[e]))s("A".concat(p),"n",m++),k("A".concat(p),m-1),s("B".concat(p),"s",t.name),k("B".concat(p),t.name),s("C".concat(p),"s",t.unit),k("C".concat(p),t.unit),s("D".concat(p),"n",t.qty),k("D".concat(p),t.qty),s("E".concat(p),"n",t.unitPrice),k("E".concat(p),t.unitPrice),s("F".concat(p),"n",0),k("F".concat(p),0),s("G".concat(p),"n",0),k("G".concat(p),0),r("H".concat(p),"ROUND(SUM(E".concat(p,":G").concat(p,"),2)")),k("H".concat(p),""),r("I".concat(p),"ROUND(E".concat(p,"*D").concat(p,",2)")),k("I".concat(p),""),r("J".concat(p),"ROUND(F".concat(p,"*D").concat(p,",2)")),k("J".concat(p),""),r("K".concat(p),"ROUND(G".concat(p,"*D").concat(p,",2)")),k("K".concat(p),""),r("L".concat(p),"ROUND(H".concat(p,"*D").concat(p,",2)")),k("L".concat(p),""),null===b&&(b=p),j=p,p++;let C=p+1;s("B".concat(C),"s","Kopā "),b?(r("I".concat(C),"SUM(I".concat(b,":I").concat(j,")")),r("J".concat(C),"SUM(J".concat(b,":J").concat(j,")")),r("K".concat(C),"SUM(K".concat(b,":K").concat(j,")")),r("L".concat(C),"SUM(L".concat(b,":L").concat(j,")"))):(s("I".concat(C),"n",0),s("J".concat(C),"n",0),s("K".concat(C),"n",0),s("L".concat(C),"n",0)),C+=2,s("B".concat(C),"s","Tiešās izmaksas kopā"),r("I".concat(C),"I".concat(C-2)),r("J".concat(C),"J".concat(C-2)),r("K".concat(C),"K".concat(C-2)),r("L".concat(C),"L".concat(C-2));let I=C+5;s("B".concat(I),"s","PVN"),s("C".concat(I),"n",.21),r("L".concat(I),"ROUND(L".concat(C,"*C").concat(I,",2)"));let N=I+1;s("B".concat(N),"s","Pavisam kopā"),r("L".concat(N),"ROUND(L".concat(C,"+L").concat(I,",2)")),s("J9","s","Tāmes summa euro :"),r("L9","L".concat(C)),s("J10","s","PVN 21%:"),r("L10","L".concat(I)),s("J11","s","Pavisam kopā euro:"),r("L11","L".concat(N));let B=e=>Math.min(80,Math.max(8,Math.ceil(1.1*e.reduce((e,t)=>Math.max(e,String(t||"").length),0))));n["!cols"]=[{wch:B(f.A)},{wch:B(f.B)},{wch:B(f.C)},{wch:B(f.D)},{wch:B(f.E)},{wch:B(f.F)},{wch:B(f.G)},{wch:B(f.H)},{wch:B(f.I)},{wch:B(f.J)},{wch:B(f.K)},{wch:B(f.L)}],n["!ref"]="A1:L".concat(N+3);let D=l.M9(a,{type:"base64",bookType:"xlsx"}),A="Tame_Balta_".concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e=>String(e).padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate()),"_").concat(t(e.getHours()),"-").concat(t(e.getMinutes()))}(),".xlsx"),T=document.createElement("a");T.href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,".concat(D),T.download=A,document.body.appendChild(T),T.click(),document.body.removeChild(T);var E={id:crypto.randomUUID(),filename:A,createdAtISO:new Date().toISOString(),estimator:y||"Nezināms",base64:D};let J=x();J.unshift(E),localStorage.setItem(g,JSON.stringify(J)),ec(x())}function eg(e){let{label:t,children:a}=e;return(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:t}),(0,i.jsx)("div",{children:a})]})}function ex(e){let{title:t,children:a}=e;return(0,i.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,i.jsx)("div",{style:{fontSize:18,fontWeight:700,marginBottom:10},children:t}),a]})}let eb=Math.round((b-1)/11*100);return(0,i.jsx)("div",{style:{minHeight:"100vh",background:"#f7fafc",color:"#111827"},children:(0,i.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto",padding:16},children:[(0,i.jsx)("div",{style:{background:"white",padding:12,borderRadius:12,marginBottom:12},children:(0,i.jsx)(eg,{label:"Lietas Nr.",children:(0,i.jsx)("input",{value:w,onChange:e=>C(e.target.value),placeholder:"Apdrošināšanas lietas numurs",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),(0,i.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",gap:12,marginBottom:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontSize:22,fontWeight:800},children:["Apskates forma – solis ",b,"/",12]}),(0,i.jsx)("div",{style:{fontSize:13,color:"#4b5563"},children:"Tāmētājs ievada tikai daudzumu. Cenas netiek rādītas formā un parādīsies tikai gala tāmē."})]}),(0,i.jsxs)("div",{style:{background:"white",padding:12,borderRadius:12,width:360},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"Tāmētāja profils (neobligāti)"}),(0,i.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:6},placeholder:"Vārds, Uzvārds",value:y,onChange:e=>v(e.target.value)}),(0,i.jsx)("input",{style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"E-pasts",value:f,onChange:e=>k(e.target.value)})]})]}),(0,i.jsx)("div",{style:{height:8,background:"#e5e7eb",borderRadius:999,marginBottom:16},children:(0,i.jsx)("div",{style:{width:"".concat(eb,"%"),height:8,background:"#10b981",borderRadius:999}})}),1===b&&(0,i.jsx)(ex,{title:"1. Objekta adrese",children:(0,i.jsx)(eg,{label:"Objekta adrese",children:(0,i.jsx)("input",{value:S,onChange:e=>I(e.target.value),placeholder:"Iela 1, Pilsēta",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})}),2===b&&(0,i.jsxs)(ex,{title:"2. Apdrošināšanas kompānija",children:[(0,i.jsx)(eg,{label:"Izvēlies kompāniju",children:(0,i.jsx)("select",{value:R,onChange:e=>N(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:s.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})}),"Balta"===R&&(0,i.jsx)("div",{style:{fontSize:12,color:el?"#b91c1c":"#065f46"},children:el||(ei.length?"Ielādēts BALTA cenrādis (".concat(ei.length," pozīcijas)"):"Notiek BALTA cenrāža ielāde...")})]}),3===b&&(0,i.jsxs)(ex,{title:"3. Kur notika negadījums?",children:[(0,i.jsx)(eg,{label:"Vieta",children:(0,i.jsxs)("select",{value:z,onChange:e=>B(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),r.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Dzīvojamā ēka"===z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eg,{label:"3.1. Dzīvojamās ēkas tips",children:(0,i.jsxs)("select",{value:L,onChange:e=>D(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),o.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Cits"===L&&(0,i.jsx)(eg,{label:"3.1.1. Norādi",children:(0,i.jsx)("input",{value:A,onChange:e=>T(e.target.value),placeholder:"NI tips",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]})]}),4===b&&(0,i.jsxs)(ex,{title:"4. Kas notika ar nekustamo īpašumu?",children:[(0,i.jsx)(eg,{label:"Notikuma veids",children:(0,i.jsxs)("select",{value:E,onChange:e=>J(e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— Izvēlies —"}),d.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),"Cits"===E&&(0,i.jsx)(eg,{label:"4.1. Norādi",children:(0,i.jsx)("input",{value:M,onChange:e=>P(e.target.value),placeholder:"Notikuma apraksts",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),5===b&&(0,i.jsx)(ex,{title:"5. Elektrības traucējumi",children:(0,i.jsxs)(eg,{label:"Elektrības traucējumi",children:[(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"el",checked:"Jā"===K,onChange:()=>O("Jā")})," Ir"]}),(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"radio",name:"el",checked:"Nē"===K,onChange:()=>O("Nē")})," Nav"]})]})}),6===b&&(0,i.jsx)(ex,{title:"6. Vai nepieciešama žāvēšana?",children:(0,i.jsx)(eg,{label:"Žāvēšana",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"dry",checked:_===e,onChange:()=>U(e)})," ",e]},e))})}),7===b&&(0,i.jsx)(ex,{title:"7. Vai bojāts kopīpašums?",children:(0,i.jsx)(eg,{label:"Kopīpašums",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"common",checked:F===e,onChange:()=>q(e)})," ",e]},e))})}),8===b&&(0,i.jsxs)(ex,{title:"8. Zaudējuma novērtējums pēc klienta vārdiem",children:[(0,i.jsx)(eg,{label:"Vai ir zināma summa?",children:c.map(e=>(0,i.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,marginRight:16},children:[(0,i.jsx)("input",{type:"radio",name:"loss",checked:G===e,onChange:()=>V(e)})," ",e]},e))}),"Jā"===G&&(0,i.jsx)(eg,{label:"Summa EUR",children:(0,i.jsx)("input",{type:"number",min:0,value:W,onChange:e=>H(e.target.value),placeholder:"€ summa",style:{width:200,border:"1px solid #e5e7eb",borderRadius:10,padding:8}})})]}),9===b&&(0,i.jsx)(ex,{title:"9. Izvēlies telpu/as, kas tika bojātas",children:(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(240px,1fr))",gap:12},children:u.map(e=>(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,i.jsxs)("label",{style:{fontWeight:600,display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"checkbox",checked:X[e].checked,onChange:t=>Y({...X,[e]:{...X[e],checked:t.target.checked}})}),e]}),X[e].checked&&(0,i.jsxs)("div",{style:{marginTop:8},children:["Cits"===e&&(0,i.jsx)("input",{placeholder:"Telpas nosaukums",value:X[e].custom,onChange:t=>Y({...X,[e]:{...X[e],custom:t.target.value}}),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,marginBottom:8}}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("span",{children:"Daudzums:"}),(0,i.jsx)("input",{type:"number",min:1,value:X[e].count,onChange:t=>Y({...X,[e]:{...X[e],count:Number(t.target.value||1)}}),style:{width:90,border:"1px solid #e5e7eb",borderRadius:10,padding:6}})]})]})]},e))})}),10===b&&(0,i.jsxs)(ex,{title:"10. Izvēlētās telpas",children:[0===Z.length?(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Nav izvēlētas telpas 9. solī."}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:12},children:Z.map(e=>{($[e.id]||[]).filter(e=>e.itemId&&e.quantity).length;let t=eh(e.id);return(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,background:"#f9fafb"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[(0,i.jsxs)("div",{style:{fontWeight:700},children:[e.type," ",e.index]}),(0,i.jsx)("button",{type:"button",onClick:()=>(function(e){let[t,a]=e.split("-"),i=parseInt(a,10)||1;setRoomActions(e=>{var a;let n={...e},l=(null==(a=rooms[t])?void 0:a.count)||1;for(let e=i+1;e<=l;e++){let a="".concat(t,"-").concat(e),i="".concat(t,"-").concat(e-1);n[a]&&(n[i]=n[a])}return delete n["".concat(t,"-").concat(l)],n}),setRooms(e=>{let a=e[t];if(!a)return e;let i=(Number(a.count)||1)-1,n={...e};return i<=0?n[t]={...a,checked:!1,count:1}:n[t]={...a,checked:!0,count:i},n}),setEditingRoomId(t=>t===e?null:t)})(e.id),title:"Dzēst telpu",style:{marginLeft:"auto",padding:"4px 8px",borderRadius:8,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"})]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#4b5563",marginBottom:8},children:["Pozīcijas: ",($[e.id]||[]).filter(e=>e.itemId&&e.quantity).length]}),t.length>0&&(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:8},children:t.map(e=>(0,i.jsx)("span",{style:{background:"#e5e7eb",borderRadius:999,padding:"4px 10px",fontSize:12},children:e},e))}),(0,i.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,i.jsx)("button",{type:"button",onClick:()=>{ea(e.id),j(11)},style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Atvērt"})})]},e.id)})}),Z.length>0&&Z.every(e=>($[e.id]||[]).some(e=>e.itemId&&e.quantity))&&(0,i.jsxs)("div",{style:{marginTop:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>j(9),style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"+ Pievienot vēl telpu"}),Z.length>0&&Z.every(e=>($[e.id]||[]).some(e=>e.itemId&&e.quantity))&&(0,i.jsx)("button",{type:"button",onClick:em,style:{padding:"12px 16px",borderRadius:12,background:"#059669",color:"white",border:0},children:"Viss pabeigts — izveidot tāmi"})]})]}),11===b&&et&&(0,i.jsxs)(ex,{title:"11. Pozīcijas un apjomi – ".concat(null==(e=Z.find(e=>e.id===et))?void 0:e.type," ").concat(null==(t=Z.find(e=>e.id===et))?void 0:t.index),children:[(0,i.jsx)(eg,{label:"Piezīmes",children:(0,i.jsx)("input",{value:(null==(a=Z.find(e=>e.id===et))?void 0:a.note)||"",onChange:e=>{var t;return t=e.target.value,void Q(e=>e.map(e=>e.id===et?{...e,note:t}:e))},placeholder:"Papildus informācija",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8}})}),(0,i.jsx)("div",{style:{fontWeight:700,margin:"12px 0 6px"},children:"Pozīcijas un apjomi"}),($[et]||[{category:"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]).map((e,t)=>{let a=eh(et),n=e.category||a[0]||"",l=ei.filter(e=>!n||e.category===n);return(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 2fr 1fr 0.8fr auto",gap:8,alignItems:"end",marginBottom:8},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Kategorija"}),(0,i.jsxs)("select",{value:n,onChange:e=>{var a;return a=e.target.value,void ee(e=>{var i;let n=[...e[et]||[]];return n[t]={category:a,itemId:"",itemName:"",quantity:(null==(i=n[t])?void 0:i.quantity)||"",unit:"",unit_price:null},{...e,[et]:n}})},style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[a.length>0&&(0,i.jsx)("optgroup",{label:"Ieteiktās",children:a.map(e=>(0,i.jsx)("option",{value:e,children:e},e))}),(0,i.jsxs)("optgroup",{label:"Visas",children:[(0,i.jsx)("option",{value:"",children:"— visas —"}),er.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("select",{value:e.itemId,onChange:e=>(function(e,t,a){let i=ei.find(e=>e.id===a);ee(n=>{let l=[...n[e]||[]];return i?l[t]={...l[t],itemId:a,itemName:i.name,unit:i.unit||"",unit_price:i.unit_price}:l[t]={...l[t],itemId:"",itemName:"",unit:"",unit_price:null},{...n,[e]:l}})})(et,t,e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"— izvēlies pozīciju —"}),l.slice(0,1200).map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.name," \xb7 ",e.unit||"—"]},e.id))]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Mērv."}),(0,i.jsxs)("select",{value:h(e.unit)||"",onChange:e=>eu(et,t,"unit",h(e.target.value)),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8,background:"white"},children:[(0,i.jsx)("option",{value:"",children:"—"}),eo.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:13,marginBottom:4},children:"Daudz."}),(0,i.jsx)("input",{type:"number",min:0,step:"0.01",value:e.quantity,onChange:e=>eu(et,t,"quantity",e.target.value),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:10,padding:8},placeholder:"Skaitlis"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ee(a=>({...a,[e]:[...a[e]||[],{category:t||"",itemId:"",itemName:"",quantity:"",unit:"",unit_price:null}]}))})(et,n),style:{padding:"8px 12px",borderRadius:10,background:"#111827",color:"white",border:0},children:"+ Rinda"}),(0,i.jsx)("button",{type:"button",onClick:()=>{ee(e=>{let a=e[et]||[];return a.length<=1?e:{...e,[et]:a.filter((e,a)=>a!==t)}})},style:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"white"},children:"Dzēst"}),(0,i.jsx)("button",{type:"button",onClick:()=>{ea(null),j(9)},style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:"white",color:"#111827"},children:"+ Pievienot vēl telpu"})]})]},t)}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:12},children:[(0,i.jsx)("div",{style:{fontWeight:700}}),(0,i.jsx)("div",{style:{display:"flex",gap:8},children:(0,i.jsx)("button",{type:"button",onClick:()=>{ea(null),j(10)},style:{padding:"10px 14px",borderRadius:10,background:"#111827",color:"white",border:0},children:"Saglabāt un atgriezties"})})]})]}),[1,2,3,4,5,6,7,8,9,12].includes(b)&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[(0,i.jsx)("button",{type:"button",onClick:()=>j(e=>Math.max(1,e-1)),disabled:1===b,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #e5e7eb",background:1===b?"#f3f4f6":"white",color:"#111827"},children:"← Atpakaļ"}),(0,i.jsx)("button",{type:"button",onClick:()=>j(e=>Math.min(12,e+1)),disabled:!ep||12===b,style:{padding:"10px 14px",borderRadius:10,background:ep&&12!==b?"#111827":"#9ca3af",color:"white",border:0},children:12===b?"Beigas":"Tālāk →"})]}),(0,i.jsxs)("div",{style:{background:"white",padding:16,borderRadius:12,marginTop:20},children:[(0,i.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Saglabātās tāmēs (šajā pārlūkā)"}),0===ed.length?(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Vēl nav saglabātu tāmju."}):(0,i.jsx)("div",{style:{overflowX:"auto"},children:(0,i.jsxs)("table",{style:{width:"100%",fontSize:14},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Fails"}),(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Tāmētājs"}),(0,i.jsx)("th",{style:{padding:"8px 12px"},children:"Datums"})]})}),(0,i.jsx)("tbody",{children:ed.map(e=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("td",{style:{padding:"8px 12px",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e.filename}),(0,i.jsx)("td",{style:{padding:"8px 12px"},children:e.estimator}),(0,i.jsx)("td",{style:{padding:"8px 12px"},children:new Date(e.createdAtISO).toLocaleString()})]},e.id))})]})})]}),(0,i.jsxs)("footer",{style:{paddingBottom:40,marginTop:12,fontSize:12,color:"#6b7280"},children:["Piezīme: cenrādis ielādējas no ",(0,i.jsx)("code",{children:"public/prices/balta.json"})," (Balta 27.08.2024). Cenas netiek rādītas formā; tās parādās tikai gala tāmē."]})]})})}}}]);